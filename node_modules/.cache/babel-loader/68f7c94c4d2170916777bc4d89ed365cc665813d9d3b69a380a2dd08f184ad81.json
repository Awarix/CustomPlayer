{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/ExpandedPlayer.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport { IconButton } from \"@mui/material\";\nimport PlayCircleFilledIcon from \"@mui/icons-material/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@mui/icons-material/PauseCircleFilled\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\nconst ExpandedPlayer = ({\n  url,\n  isPlay,\n  togglePlay,\n  currentTime,\n  setCurrentTime,\n  zoom,\n  setZoom\n}) => {\n  _s();\n  const wavesurferRef = useRef(null);\n\n  //   useEffect(() => {\n  //     if (!wavesurferRef.current) {\n  //       wavesurferRef.current = WaveSurfer.create({\n  //         container: \"#waveform\",\n  //         waveColor: \"#b7e1dd\",\n  //         progressColor: \"#4Db6AC\",\n  //         cursorColor: \"#357F78\",\n  //         responsive: true,\n  //         plugins: [\n  //           TimelinePlugin.create({\n  //             container: \"#wave-timeline\",\n  //             height: 30,\n  //           }),\n  //         ],\n  //       });\n\n  //       wavesurferRef.current.load(url);\n\n  //       wavesurferRef.current.on(\"ready\", () => {\n  //         wavesurferRef.current?.setCurrentTime(currentTime);\n  //         wavesurferRef.current?.zoom(zoom);\n  //         if (isPlay) {\n  //           wavesurferRef.current?.play();\n  //         }\n  //       });\n\n  //       wavesurferRef.current.on(\"audioprocess\", () => {\n  //         if (wavesurferRef.current) {\n  //           setCurrentTime(wavesurferRef.current.getCurrentTime());\n  //         }\n  //       });\n\n  //       wavesurferRef.current.on(\"seek\", () => {\n  //         if (wavesurferRef.current) {\n  //           setCurrentTime(wavesurferRef.current.getCurrentTime());\n  //         }\n  //       });\n  //     }\n\n  //     return () => {\n  //       wavesurferRef.current?.destroy();\n  //       wavesurferRef.current = null;\n  //     };\n  //   }, [url, currentTime, zoom, isPlay, setCurrentTime]);\n\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.seekTo(currentTime / wavesurferRef.current.getDuration());\n    }\n  }, [currentTime]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.zoom(zoom);\n    }\n  }, [zoom]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: togglePlay,\n        children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 66\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: () => setZoom(zoom * 2),\n        children: /*#__PURE__*/_jsxDEV(ZoomInIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: () => setZoom(zoom / 2),\n        children: /*#__PURE__*/_jsxDEV(ZoomOutIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"waveform\",\n      style: {\n        width: \"100%\",\n        height: \"300px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"wave-timeline\",\n      style: {\n        width: \"100%\",\n        height: \"30px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(ExpandedPlayer, \"Rz1fU4/piSRGOHuIrrVBytpNfr8=\");\n_c = ExpandedPlayer;\nexport default ExpandedPlayer;\nvar _c;\n$RefreshReg$(_c, \"ExpandedPlayer\");","map":{"version":3,"names":["useEffect","useRef","IconButton","PlayCircleFilledIcon","PauseCircleFilledIcon","ZoomInIcon","ZoomOutIcon","jsxDEV","_jsxDEV","TimelinePlugin","require","ExpandedPlayer","url","isPlay","togglePlay","currentTime","setCurrentTime","zoom","setZoom","_s","wavesurferRef","current","seekTo","getDuration","play","pause","children","color","size","onClick","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","id","style","width","height","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/ExpandedPlayer.tsx"],"sourcesContent":["import { FC, useEffect, useRef } from \"react\";\nimport { IconButton } from \"@mui/material\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport PlayCircleFilledIcon from \"@mui/icons-material/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@mui/icons-material/PauseCircleFilled\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\n\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\n\nconst ExpandedPlayer: FC<{\n  url: string;\n  isPlay: boolean;\n  togglePlay: () => void;\n  currentTime: number;\n  setCurrentTime: (time: number) => void;\n  zoom: number;\n  setZoom: (zoom: number) => void;\n}> = ({ url, isPlay, togglePlay, currentTime, setCurrentTime, zoom, setZoom }) => {\n  const wavesurferRef = useRef<WaveSurfer | null>(null);\n\n//   useEffect(() => {\n//     if (!wavesurferRef.current) {\n//       wavesurferRef.current = WaveSurfer.create({\n//         container: \"#waveform\",\n//         waveColor: \"#b7e1dd\",\n//         progressColor: \"#4Db6AC\",\n//         cursorColor: \"#357F78\",\n//         responsive: true,\n//         plugins: [\n//           TimelinePlugin.create({\n//             container: \"#wave-timeline\",\n//             height: 30,\n//           }),\n//         ],\n//       });\n\n//       wavesurferRef.current.load(url);\n\n//       wavesurferRef.current.on(\"ready\", () => {\n//         wavesurferRef.current?.setCurrentTime(currentTime);\n//         wavesurferRef.current?.zoom(zoom);\n//         if (isPlay) {\n//           wavesurferRef.current?.play();\n//         }\n//       });\n\n//       wavesurferRef.current.on(\"audioprocess\", () => {\n//         if (wavesurferRef.current) {\n//           setCurrentTime(wavesurferRef.current.getCurrentTime());\n//         }\n//       });\n\n//       wavesurferRef.current.on(\"seek\", () => {\n//         if (wavesurferRef.current) {\n//           setCurrentTime(wavesurferRef.current.getCurrentTime());\n//         }\n//       });\n//     }\n\n//     return () => {\n//       wavesurferRef.current?.destroy();\n//       wavesurferRef.current = null;\n//     };\n//   }, [url, currentTime, zoom, isPlay, setCurrentTime]);\n\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.seekTo(currentTime / wavesurferRef.current.getDuration());\n    }\n  }, [currentTime]);\n\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.zoom(zoom);\n    }\n  }, [zoom]);\n\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay]);\n\n  return (\n    <div>\n      <div>\n        <IconButton color=\"primary\" size=\"medium\" onClick={togglePlay}>\n          {isPlay ? <PauseCircleFilledIcon fontSize=\"large\" /> : <PlayCircleFilledIcon fontSize=\"large\" />}\n        </IconButton>\n        <IconButton color=\"primary\" size=\"medium\" onClick={() => setZoom(zoom * 2)}>\n          <ZoomInIcon fontSize=\"large\" />\n        </IconButton>\n        <IconButton color=\"primary\" size=\"medium\" onClick={() => setZoom(zoom / 2)}>\n          <ZoomOutIcon fontSize=\"large\" />\n        </IconButton>\n      </div>\n      <div id=\"waveform\" style={{ width: \"100%\", height: \"300px\" }} />\n      <div id=\"wave-timeline\" style={{ width: \"100%\", height: \"30px\" }} />\n    </div>\n  );\n};\n\nexport default ExpandedPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}