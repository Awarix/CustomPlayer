{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/ExpandedPlayer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport { IconButton } from \"@mui/material\";\nimport WaveSurfer from \"wavesurfer.js\";\n// import TimelinePlugin from \"wavesurfer.js/dist/plugin/timeline\";\nimport PlayCircleFilledIcon from \"@mui/icons-material/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@mui/icons-material/PauseCircleFilled\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\nconst ExpandedPlayer = ({\n  url,\n  isPlay,\n  togglePlay,\n  currentTime,\n  setCurrentTime,\n  zoom,\n  setZoom\n}) => {\n  _s();\n  const wavesurferRef = useRef(null);\n  useEffect(() => {\n    if (!wavesurferRef.current) {\n      wavesurferRef.current = WaveSurfer.create({\n        container: \"#waveform\",\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        responsive: true\n      });\n      wavesurferRef.current.on(\"ready\", () => {\n        var _wavesurferRef$curren, _wavesurferRef$curren2;\n        (_wavesurferRef$curren = wavesurferRef.current) === null || _wavesurferRef$curren === void 0 ? void 0 : _wavesurferRef$curren.setCurrentTime(currentTime);\n        (_wavesurferRef$curren2 = wavesurferRef.current) === null || _wavesurferRef$curren2 === void 0 ? void 0 : _wavesurferRef$curren2.zoom(zoom);\n        if (isPlay) {\n          var _wavesurferRef$curren3;\n          (_wavesurferRef$curren3 = wavesurferRef.current) === null || _wavesurferRef$curren3 === void 0 ? void 0 : _wavesurferRef$curren3.play();\n        }\n      });\n      wavesurferRef.current.on(\"audioprocess\", () => {\n        if (wavesurferRef.current) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n    }\n    return () => {\n      var _wavesurferRef$curren4;\n      (_wavesurferRef$curren4 = wavesurferRef.current) === null || _wavesurferRef$curren4 === void 0 ? void 0 : _wavesurferRef$curren4.destroy();\n    };\n  }, [url, currentTime, zoom, isPlay, setCurrentTime]);\n  useEffect(() => {\n    if (wavesurferRef.current && wavesurferRef.current.isReady) {\n      wavesurferRef.current.seekTo(currentTime / wavesurferRef.current.getDuration());\n    }\n  }, [currentTime]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.zoom(zoom);\n    }\n  }, [zoom]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: togglePlay,\n        children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 70\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: () => setZoom(zoom * 2),\n        children: /*#__PURE__*/_jsxDEV(ZoomInIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: () => setZoom(zoom / 2),\n        children: /*#__PURE__*/_jsxDEV(ZoomOutIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"waveform\",\n      style: {\n        width: \"100%\",\n        height: \"300px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n};\n_s(ExpandedPlayer, \"Rz1fU4/piSRGOHuIrrVBytpNfr8=\");\n_c = ExpandedPlayer;\nexport default ExpandedPlayer;\nvar _c;\n$RefreshReg$(_c, \"ExpandedPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","IconButton","WaveSurfer","PlayCircleFilledIcon","PauseCircleFilledIcon","ZoomInIcon","ZoomOutIcon","jsxDEV","_jsxDEV","TimelinePlugin","require","ExpandedPlayer","url","isPlay","togglePlay","currentTime","setCurrentTime","zoom","setZoom","_s","wavesurferRef","current","create","container","waveColor","progressColor","cursorColor","responsive","on","_wavesurferRef$curren","_wavesurferRef$curren2","_wavesurferRef$curren3","play","getCurrentTime","_wavesurferRef$curren4","destroy","isReady","seekTo","getDuration","children","color","size","onClick","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","id","style","width","height","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/ExpandedPlayer.tsx"],"sourcesContent":["import React, { FC, useState, useEffect, useRef, useCallback, useMemo } from \"react\";\nimport { IconButton, Paper } from \"@mui/material\";\nimport WaveSurfer from \"wavesurfer.js\";\n// import TimelinePlugin from \"wavesurfer.js/dist/plugin/timeline\";\nimport PlayCircleFilledIcon from \"@mui/icons-material/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@mui/icons-material/PauseCircleFilled\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\n\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\n\nconst ExpandedPlayer: FC<{\n    url: string;\n    isPlay: boolean;\n    togglePlay: () => void;\n    currentTime: number;\n    setCurrentTime: (time: number) => void;\n    zoom: number;\n    setZoom: (zoom: number) => void;\n  }> = ({ url, isPlay, togglePlay, currentTime, setCurrentTime, zoom, setZoom }) => {\n    const wavesurferRef = useRef<WaveSurfer | null>(null);\n  \n    useEffect(() => {\n      if (!wavesurferRef.current) {\n        wavesurferRef.current = WaveSurfer.create({\n          container: \"#waveform\",\n          waveColor: \"#b7e1dd\",\n          progressColor: \"#4Db6AC\",\n          cursorColor: \"#357F78\",\n          responsive: true,\n        });\n  \n        wavesurferRef.current.on(\"ready\", () => {\n            wavesurferRef.current?.setCurrentTime(currentTime);\n            wavesurferRef.current?.zoom(zoom);\n            if (isPlay) {\n              wavesurferRef.current?.play();\n            }\n          });\n    \n          wavesurferRef.current.on(\"audioprocess\", () => {\n            if (wavesurferRef.current) {\n              setCurrentTime(wavesurferRef.current.getCurrentTime());\n            }\n          });\n        }\n    \n        return () => {\n          wavesurferRef.current?.destroy();\n        };\n      }, [url, currentTime, zoom, isPlay, setCurrentTime]);\n    \n      useEffect(() => {\n        if (wavesurferRef.current && wavesurferRef.current.isReady) {\n          wavesurferRef.current.seekTo(currentTime / wavesurferRef.current.getDuration());\n        }\n      }, [currentTime]);\n    \n      useEffect(() => {\n        if (wavesurferRef.current) {\n          wavesurferRef.current.zoom(zoom);\n        }\n      }, [zoom]);\n    \n      return (\n        <div>\n          <div>\n            <IconButton color=\"primary\" size=\"medium\" onClick={togglePlay}>\n              {isPlay ? <PauseCircleFilledIcon fontSize=\"large\" /> : <PlayCircleFilledIcon fontSize=\"large\" />}\n            </IconButton>\n            <IconButton color=\"primary\" size=\"medium\" onClick={() => setZoom(zoom * 2)}>\n              <ZoomInIcon fontSize=\"large\" />\n            </IconButton>\n            <IconButton color=\"primary\" size=\"medium\" onClick={() => setZoom(zoom / 2)}>\n              <ZoomOutIcon fontSize=\"large\" />\n            </IconButton>\n          </div>\n          <div id=\"waveform\" style={{ width: \"100%\", height: \"300px\" }} />\n        </div>\n      );\n    };\n\nexport default ExpandedPlayer;\n  "],"mappings":";;AAAA,OAAOA,KAAK,IAAkBC,SAAS,EAAEC,MAAM,QAA8B,OAAO;AACpF,SAASC,UAAU,QAAe,eAAe;AACjD,OAAOC,UAAU,MAAM,eAAe;AACtC;AACA,OAAOC,oBAAoB,MAAM,sCAAsC;AACvE,OAAOC,qBAAqB,MAAM,uCAAuC;AAGzE,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,WAAW,MAAM,6BAA6B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtD,MAAMC,cAAc,GAAGC,OAAO,CAAC,mDAAmD,CAAC;AAEnF,MAAMC,cAQF,GAAGA,CAAC;EAAEC,GAAG;EAAEC,MAAM;EAAEC,UAAU;EAAEC,WAAW;EAAEC,cAAc;EAAEC,IAAI;EAAEC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EAChF,MAAMC,aAAa,GAAGpB,MAAM,CAAoB,IAAI,CAAC;EAErDD,SAAS,CAAC,MAAM;IACd,IAAI,CAACqB,aAAa,CAACC,OAAO,EAAE;MAC1BD,aAAa,CAACC,OAAO,GAAGnB,UAAU,CAACoB,MAAM,CAAC;QACxCC,SAAS,EAAE,WAAW;QACtBC,SAAS,EAAE,SAAS;QACpBC,aAAa,EAAE,SAAS;QACxBC,WAAW,EAAE,SAAS;QACtBC,UAAU,EAAE;MACd,CAAC,CAAC;MAEFP,aAAa,CAACC,OAAO,CAACO,EAAE,CAAC,OAAO,EAAE,MAAM;QAAA,IAAAC,qBAAA,EAAAC,sBAAA;QACpC,CAAAD,qBAAA,GAAAT,aAAa,CAACC,OAAO,cAAAQ,qBAAA,uBAArBA,qBAAA,CAAuBb,cAAc,CAACD,WAAW,CAAC;QAClD,CAAAe,sBAAA,GAAAV,aAAa,CAACC,OAAO,cAAAS,sBAAA,uBAArBA,sBAAA,CAAuBb,IAAI,CAACA,IAAI,CAAC;QACjC,IAAIJ,MAAM,EAAE;UAAA,IAAAkB,sBAAA;UACV,CAAAA,sBAAA,GAAAX,aAAa,CAACC,OAAO,cAAAU,sBAAA,uBAArBA,sBAAA,CAAuBC,IAAI,CAAC,CAAC;QAC/B;MACF,CAAC,CAAC;MAEFZ,aAAa,CAACC,OAAO,CAACO,EAAE,CAAC,cAAc,EAAE,MAAM;QAC7C,IAAIR,aAAa,CAACC,OAAO,EAAE;UACzBL,cAAc,CAACI,aAAa,CAACC,OAAO,CAACY,cAAc,CAAC,CAAC,CAAC;QACxD;MACF,CAAC,CAAC;IACJ;IAEA,OAAO,MAAM;MAAA,IAAAC,sBAAA;MACX,CAAAA,sBAAA,GAAAd,aAAa,CAACC,OAAO,cAAAa,sBAAA,uBAArBA,sBAAA,CAAuBC,OAAO,CAAC,CAAC;IAClC,CAAC;EACH,CAAC,EAAE,CAACvB,GAAG,EAAEG,WAAW,EAAEE,IAAI,EAAEJ,MAAM,EAAEG,cAAc,CAAC,CAAC;EAEpDjB,SAAS,CAAC,MAAM;IACd,IAAIqB,aAAa,CAACC,OAAO,IAAID,aAAa,CAACC,OAAO,CAACe,OAAO,EAAE;MAC1DhB,aAAa,CAACC,OAAO,CAACgB,MAAM,CAACtB,WAAW,GAAGK,aAAa,CAACC,OAAO,CAACiB,WAAW,CAAC,CAAC,CAAC;IACjF;EACF,CAAC,EAAE,CAACvB,WAAW,CAAC,CAAC;EAEjBhB,SAAS,CAAC,MAAM;IACd,IAAIqB,aAAa,CAACC,OAAO,EAAE;MACzBD,aAAa,CAACC,OAAO,CAACJ,IAAI,CAACA,IAAI,CAAC;IAClC;EACF,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,oBACET,OAAA;IAAA+B,QAAA,gBACE/B,OAAA;MAAA+B,QAAA,gBACE/B,OAAA,CAACP,UAAU;QAACuC,KAAK,EAAC,SAAS;QAACC,IAAI,EAAC,QAAQ;QAACC,OAAO,EAAE5B,UAAW;QAAAyB,QAAA,EAC3D1B,MAAM,gBAAGL,OAAA,CAACJ,qBAAqB;UAACuC,QAAQ,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAAGvC,OAAA,CAACL,oBAAoB;UAACwC,QAAQ,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtF,CAAC,eACbvC,OAAA,CAACP,UAAU;QAACuC,KAAK,EAAC,SAAS;QAACC,IAAI,EAAC,QAAQ;QAACC,OAAO,EAAEA,CAAA,KAAMxB,OAAO,CAACD,IAAI,GAAG,CAAC,CAAE;QAAAsB,QAAA,eACzE/B,OAAA,CAACH,UAAU;UAACsC,QAAQ,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrB,CAAC,eACbvC,OAAA,CAACP,UAAU;QAACuC,KAAK,EAAC,SAAS;QAACC,IAAI,EAAC,QAAQ;QAACC,OAAO,EAAEA,CAAA,KAAMxB,OAAO,CAACD,IAAI,GAAG,CAAC,CAAE;QAAAsB,QAAA,eACzE/B,OAAA,CAACF,WAAW;UAACqC,QAAQ,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,eACNvC,OAAA;MAAKwC,EAAE,EAAC,UAAU;MAACC,KAAK,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAE;MAAQ;IAAE;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC7D,CAAC;AAEV,CAAC;AAAC5B,EAAA,CArEAR,cAQF;AAAAyC,EAAA,GAREzC,cAQF;AA+DJ,eAAeA,cAAc;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}