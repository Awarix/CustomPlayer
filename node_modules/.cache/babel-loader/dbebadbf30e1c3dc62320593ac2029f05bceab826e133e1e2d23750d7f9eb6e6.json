{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/WavePlayer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport { WaveSurfer, WaveForm, Region } from \"wavesurfer-react\";\nimport { currTimeSubscriber, changeSegmentPositionSubscriber } from \"../../subscribers/PlayerSubscriber\";\n\n// import { PluginType } from \"wavesurfer-react/dist/types\";\n// import { GenericPlugin } from \"wavesurfer.js/dist/base-plugin\";\n// import Timeline from 'wavesurfer.js/dist/plugins/timeline.esm.js'\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RegionsPlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.regions.min\");\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\n// import RegionsPlugin, { Region as RegionWS, RegionParams } from \"wavesurfer.js/dist/plugins/regions\";\n\nconst WavePlayer = ({\n  file,\n  segments,\n  activeSegmentProp,\n  url\n}) => {\n  _s();\n  const [isPlay, setIsPlay] = useState(false);\n  const [autoCenter, setAutoCenter] = useState(true);\n  const [zoom, setZoom] = useState(10);\n  const [regions, setRegions] = useState([]);\n  const [activeSegment, setActiveSegment] = useState(activeSegmentProp);\n  const plugins = useMemo(() => [{\n    plugin: RegionsPlugin,\n    options: {\n      dragSelection: false,\n      showTooltip: false\n    }\n  }, {\n    plugin: TimelinePlugin,\n    options: {\n      container: \"#timeline\"\n    }\n  }], []);\n  const wavesurferRef = useRef(null);\n  const handleWSMount = useCallback(waveSurfer => {\n    wavesurferRef.current = waveSurfer;\n    wavesurferRef.current.load(url);\n    wavesurferRef.current.on(\"ready\", () => {\n      console.log(\"WaveSurfer is ready\");\n    });\n    wavesurferRef.current.on(\"region-update-end\", region => {\n      changeSegmentPositionSubscriber.next({\n        segment: region.data,\n        start: region.start,\n        end: region.end\n      });\n    });\n    let lastTime = 0;\n    wavesurferRef.current.on(\"audioprocess\", currentTime => {\n      const diff = Math.abs(currentTime - lastTime);\n      if (diff > 0.1) {\n        lastTime = currentTime;\n        currTimeSubscriber.next(currentTime);\n      }\n    });\n  }, [url]);\n  const setZoomClick = zoom => {\n    if (zoom < 5) zoom = 5;\n    if (zoom > 1000) zoom = 1000;\n    setZoom(zoom);\n  };\n  useEffect(() => {\n    const mappedRegions = segments.map(s => ({\n      id: s.id,\n      start: s.Start,\n      end: s.End,\n      color: \"rgba(212, 215, 247, 0.4)\",\n      drag: false,\n      resize: false,\n      handleStyle: {\n        left: {\n          backgroundColor: \"transparent\",\n          width: \"5px\"\n        },\n        right: {\n          backgroundColor: \"transparent\",\n          width: \"5px\"\n        }\n      },\n      data: s\n    }));\n    setRegions(mappedRegions);\n  }, [segments]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    setZoom(10);\n    if (url === \"\") return;\n    wavesurferRef.current.load(url);\n  }, [file, url]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    if (wavesurferRef.current.params.minPxPerSec !== zoom) {\n      wavesurferRef.current.zoom(zoom);\n    }\n  }, [zoom]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    if (isPlay) {\n      wavesurferRef.current.play();\n    } else {\n      wavesurferRef.current.pause();\n    }\n  }, [isPlay]);\n\n  // useEffect(() => {\n  //   if (!wavesurferRef.current) return;\n\n  //   wavesurferRef.current.setAutoCenter(autoCenter);\n  // }, [autoCenter]);\n\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    setActiveSegment(activeSegmentProp);\n    if (activeSegmentProp) {\n      let zoomFactor = 500;\n      const width = wavesurferRef.current.drawer.wrapper.clientWidth;\n      const segmentDuration = activeSegmentProp.End - activeSegmentProp.Start;\n      for (let i = 0; i < 10; i++) {\n        if (segmentDuration * zoomFactor < width) break;\n        zoomFactor /= 2;\n      }\n      if (zoomFactor < 5) zoomFactor = 5;\n      setZoomClick(zoomFactor);\n      setAutoCenter(false);\n      setIsPlay(true);\n      const total = wavesurferRef.current.getDuration();\n      if (total > 0) {\n        const centerTime = activeSegmentProp.Start + (activeSegmentProp.End - activeSegmentProp.Start) / 2;\n        const t1 = centerTime / total;\n        wavesurferRef.current.zoom(zoomFactor);\n        wavesurferRef.current.seekAndCenter(t1);\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n        wavesurferRef.current.play();\n      }\n    }\n    regions.forEach(region => {\n      if (region.color !== \"rgba(212, 215, 247, 0.4)\") {\n        region.color = \"rgba(212, 215, 247, 0.4)\";\n      }\n      if ((activeSegmentProp === null || activeSegmentProp === void 0 ? void 0 : activeSegmentProp.id) === region.id) {\n        region.color = \"rgba(212, 215, 247, 0.4)\";\n      }\n    });\n    const subscription = currTimeSubscriber.subscribe(currentTime => {\n      if (wavesurferRef.current && activeSegmentProp && currentTime >= activeSegmentProp.End) {\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [activeSegmentProp, regions]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(WaveSurfer, {\n      onMount: handleWSMount,\n      plugins: plugins,\n      children: [/*#__PURE__*/_jsxDEV(WaveForm, {\n        id: \"waveform\",\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        autoCenter: autoCenter,\n        splitChannels: segments[0].ChannelNumber === 1,\n        children: regions.map(regionProps => /*#__PURE__*/_jsxDEV(Region, {\n          ...regionProps\n        }, regionProps.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: \"20px\"\n        },\n        id: \"timeline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: \"40px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        onClick: e => {\n          document.activeElement.blur();\n          setIsPlay(prev => !prev);\n        },\n        children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n          fontSize: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n          fontSize: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 67\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        title: \"\\u0423\\u0432\\u0435\\u043B\\u0438\\u0447\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n        onClick: e => {\n          document.activeElement.blur();\n          setZoomClick(zoom * 2);\n        },\n        children: /*#__PURE__*/_jsxDEV(ZoomInIcon, {\n          fontSize: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        title: \"\\u0423\\u043C\\u0435\\u043D\\u044C\\u0448\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n        onClick: e => {\n          document.activeElement.blur();\n          setZoomClick(zoom / 2);\n        },\n        children: /*#__PURE__*/_jsxDEV(ZoomOutIcon, {\n          fontSize: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n};\n_s(WavePlayer, \"J2XZEJN7L7EoNuN7uDHytRY5Rtw=\");\n_c = WavePlayer;\nexport default WavePlayer;\nvar _c;\n$RefreshReg$(_c, \"WavePlayer\");","map":{"version":3,"names":["React","useMemo","useRef","useState","useEffect","useCallback","IconButton","PlayCircleFilledIcon","PauseCircleFilledIcon","ZoomInIcon","ZoomOutIcon","WaveSurfer","WaveForm","Region","currTimeSubscriber","changeSegmentPositionSubscriber","jsxDEV","_jsxDEV","RegionsPlugin","require","TimelinePlugin","WavePlayer","file","segments","activeSegmentProp","url","_s","isPlay","setIsPlay","autoCenter","setAutoCenter","zoom","setZoom","regions","setRegions","activeSegment","setActiveSegment","plugins","plugin","options","dragSelection","showTooltip","container","wavesurferRef","handleWSMount","waveSurfer","current","load","on","console","log","region","next","segment","data","start","end","lastTime","currentTime","diff","Math","abs","setZoomClick","mappedRegions","map","s","id","Start","End","color","drag","resize","handleStyle","left","backgroundColor","width","right","params","minPxPerSec","play","pause","zoomFactor","drawer","wrapper","clientWidth","segmentDuration","i","total","getDuration","centerTime","t1","seekAndCenter","setCurrentTime","forEach","subscription","subscribe","unsubscribe","style","children","onMount","waveColor","progressColor","cursorColor","splitChannels","ChannelNumber","regionProps","fileName","_jsxFileName","lineNumber","columnNumber","height","onClick","e","document","activeElement","blur","prev","fontSize","title","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/WavePlayer.tsx"],"sourcesContent":["import React, { FC, useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport { WaveSurfer, WaveForm, Region } from \"wavesurfer-react\";\nimport { currTimeSubscriber, changeSegmentPositionSubscriber } from \"../../subscribers/PlayerSubscriber\";\nimport { SegmentModel as Segment } from \"../AudioContext\";\n// import { PluginType } from \"wavesurfer-react/dist/types\";\n// import { GenericPlugin } from \"wavesurfer.js/dist/base-plugin\";\n// import Timeline from 'wavesurfer.js/dist/plugins/timeline.esm.js'\n\ninterface Props {\n  file: File | null;\n  segments: Segment[];\n  activeSegmentProp: Segment | null;\n  url: string;\n}\nconst RegionsPlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.regions.min\");\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\n// import RegionsPlugin, { Region as RegionWS, RegionParams } from \"wavesurfer.js/dist/plugins/regions\";\n\nconst WavePlayer: FC<Props> = ({ file, segments, activeSegmentProp, url }) => {\n  const [isPlay, setIsPlay] = useState<boolean>(false);\n  const [autoCenter, setAutoCenter] = useState<boolean>(true);\n  const [zoom, setZoom] = useState<number>(10);\n  const [regions, setRegions] = useState<any[]>([]);\n  const [activeSegment, setActiveSegment] = useState<Segment | null>(activeSegmentProp);\n\n  const plugins= useMemo(() => [\n    {\n      plugin: RegionsPlugin,\n      options: { dragSelection: false, showTooltip: false },\n    },\n    {\n      plugin: TimelinePlugin,\n      options: { container: \"#timeline\" },\n    },\n  ], []);\n\n  const wavesurferRef = useRef<any>(null);\n\n  const handleWSMount = useCallback((waveSurfer) => {\n    wavesurferRef.current = waveSurfer;\n    wavesurferRef.current.load(url);\n\n    wavesurferRef.current.on(\"ready\", () => {\n      console.log(\"WaveSurfer is ready\");\n    });\n\n    wavesurferRef.current.on(\"region-update-end\", (region: any) => {\n      changeSegmentPositionSubscriber.next({\n        segment: region.data,\n        start: region.start,\n        end: region.end,\n      });\n    });\n\n    let lastTime = 0;\n    wavesurferRef.current.on(\"audioprocess\", (currentTime: number) => {\n      const diff = Math.abs(currentTime - lastTime);\n      if (diff > 0.1) {\n        lastTime = currentTime;\n        currTimeSubscriber.next(currentTime);\n      }\n    });\n  }, [url]);\n\n  const setZoomClick = (zoom: number) => {\n    if (zoom < 5) zoom = 5;\n    if (zoom > 1000) zoom = 1000;\n    setZoom(zoom);\n  };\n\n  useEffect(() => {\n    const mappedRegions = segments.map(s => ({\n      id: s.id,\n      start: s.Start,\n      end: s.End,\n      color: \"rgba(212, 215, 247, 0.4)\",\n      drag: false,\n      resize: false,\n      handleStyle: {\n        left: { backgroundColor: \"transparent\", width: \"5px\" },\n        right: { backgroundColor: \"transparent\", width: \"5px\" },\n      },\n      data: s,\n    }));\n    setRegions(mappedRegions);\n  }, [segments]);\n\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n\n    setZoom(10);\n\n    if (url === \"\") return;\n\n    wavesurferRef.current.load(url);\n  }, [file, url]);\n\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n\n    if (wavesurferRef.current.params.minPxPerSec !== zoom) {\n      wavesurferRef.current.zoom(zoom);\n    }\n  }, [zoom]);\n\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n\n    if (isPlay) {\n      wavesurferRef.current.play();\n    } else {\n      wavesurferRef.current.pause();\n    }\n  }, [isPlay]);\n\n  // useEffect(() => {\n  //   if (!wavesurferRef.current) return;\n\n  //   wavesurferRef.current.setAutoCenter(autoCenter);\n  // }, [autoCenter]);\n\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n\n    setActiveSegment(activeSegmentProp);\n\n    if (activeSegmentProp) {\n      let zoomFactor = 500;\n      const width = wavesurferRef.current.drawer.wrapper.clientWidth;\n      const segmentDuration = activeSegmentProp.End - activeSegmentProp.Start;\n\n      for (let i = 0; i < 10; i++) {\n        if (segmentDuration * zoomFactor < width) break;\n        zoomFactor /= 2;\n      }\n      if (zoomFactor < 5) zoomFactor = 5;\n\n      setZoomClick(zoomFactor);\n      setAutoCenter(false);\n      setIsPlay(true);\n\n      const total = wavesurferRef.current.getDuration();\n      if (total > 0) {\n        const centerTime = activeSegmentProp.Start + (activeSegmentProp.End - activeSegmentProp.Start) / 2;\n        const t1 = centerTime / total;\n\n        wavesurferRef.current.zoom(zoomFactor);\n        wavesurferRef.current.seekAndCenter(t1);\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n        wavesurferRef.current.play();\n      }\n    }\n\n    regions.forEach(region => {\n      if (region.color !== \"rgba(212, 215, 247, 0.4)\") {\n        region.color = \"rgba(212, 215, 247, 0.4)\";\n      }\n\n      if (activeSegmentProp?.id === region.id) {\n        region.color = \"rgba(212, 215, 247, 0.4)\";\n      }\n    });\n\n    const subscription = currTimeSubscriber.subscribe(currentTime => {\n      if (wavesurferRef.current && activeSegmentProp && currentTime >= activeSegmentProp.End) {\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n      }\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [activeSegmentProp, regions]);\n\n  return (\n    <div style={{ width: \"100%\" }}>\n      <WaveSurfer onMount={handleWSMount} plugins={plugins} >\n        <WaveForm id=\"waveform\" waveColor=\"#b7e1dd\" progressColor=\"#4Db6AC\" cursorColor=\"#357F78\" autoCenter={autoCenter} splitChannels={segments[0].ChannelNumber === 1}>\n          {regions.map(regionProps => (\n            <Region key={regionProps.id} {...regionProps} />\n          ))}\n        </WaveForm>\n        <div style={{ height: \"20px\" }} id=\"timeline\" />\n      </WaveSurfer>\n\n      <div style={{ height: \"40px\" }}>\n        <IconButton\n          color=\"primary\"\n          onClick={(e: any) => {\n            (document.activeElement as HTMLElement).blur();\n            setIsPlay((prev) => !prev);\n          }}\n        >\n          {isPlay ? <PauseCircleFilledIcon fontSize=\"medium\" /> : <PlayCircleFilledIcon fontSize=\"medium\" />}\n        </IconButton>\n        <IconButton\n          color=\"primary\"\n          title=\"Увеличить масштаб\"\n          onClick={(e: any) => {\n            (document.activeElement as HTMLElement).blur();\n            setZoomClick(zoom * 2);\n          }}\n        >\n          <ZoomInIcon fontSize=\"medium\" />\n        </IconButton>\n        <IconButton\n          color=\"primary\"\n          title=\"Уменьшить масштаб\"\n          onClick={(e: any) => {\n            (document.activeElement as HTMLElement).blur();\n            setZoomClick(zoom / 2);\n          }}\n        >\n          <ZoomOutIcon fontSize=\"medium\" />\n        </IconButton>\n        {/* <IconButton\n          color=\"primary\"\n          title=\"Скачать аудио\"\n          onClick={(e: any) => {\n            (document.activeElement as HTMLElement).blur();\n            downloadAudio();\n          }}\n        >\n          <GetAppIcon fontSize=\"medium\" />\n        </IconButton> */}\n\n        {/* <FormControlLabel\n          style={{ marginLeft: \"10px\" }}\n          onClick={(e: any) => {\n            (document.activeElement as HTMLElement).blur();\n          }}\n          control={\n            <Checkbox\n              checked={autoCenter}\n              color=\"primary\"\n              onChange={(event: any) => {\n                setAutoCenter(event.target.checked);\n              }}\n            />\n          }\n          label=\"Позиция по центру\"\n        /> */}\n      </div>\n    </div>\n  );\n};\n\nexport default WavePlayer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}