{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/CompactPlayer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport { IconButton } from '@mui/material';\nimport PlayCircleFilledIcon from '@mui/icons-material/PlayCircleFilled';\nimport PauseCircleFilledIcon from '@mui/icons-material/PauseCircleFilled';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport WaveSurferClass from \"wavesurfer.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CompactPlayer = ({\n  url,\n  isPlay,\n  setIsPlay,\n  currentTime,\n  setCurrentTime,\n  setIsExpanded\n}) => {\n  _s();\n  const containerRef = useRef(null);\n  const wavesurferRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  useEffect(() => {\n    if (containerRef.current && !wavesurferRef.current) {\n      wavesurferRef.current = WaveSurferClass.create({\n        container: containerRef.current,\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        responsive: true,\n        height: 40,\n        barWidth: 2,\n        barGap: 1\n      });\n      wavesurferRef.current.on('ready', () => {\n        var _wavesurferRef$curren;\n        setIsReady(true);\n        (_wavesurferRef$curren = wavesurferRef.current) === null || _wavesurferRef$curren === void 0 ? void 0 : _wavesurferRef$curren.setCurrentTime(currentTime);\n      });\n      wavesurferRef.current.on('error', error => {\n        console.error('WaveSurfer error:', error);\n      });\n      wavesurferRef.current.on('audioprocess', () => {\n        if (wavesurferRef.current && isReady) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n      wavesurferRef.current.load(url);\n    }\n    return () => {\n      if (wavesurferRef.current) {\n        wavesurferRef.current.destroy();\n      }\n    };\n  }, [url, currentTime, setCurrentTime]);\n  useEffect(() => {\n    if (wavesurferRef.current && isReady) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay, isReady]);\n  const handlePlayPause = () => {\n    if (isReady) {\n      setIsPlay(!isPlay);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n      color: \"primary\",\n      size: \"medium\",\n      onClick: handlePlayPause,\n      disabled: !isReady,\n      children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 19\n      }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 64\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        flex: 1,\n        marginLeft: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n      color: \"primary\",\n      size: \"medium\",\n      onClick: () => setIsExpanded(true),\n      children: /*#__PURE__*/_jsxDEV(ExpandLessIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(CompactPlayer, \"lrjWsmnCKXdt8OLBYFo6pOiM23E=\");\n_c = CompactPlayer;\nexport default CompactPlayer;\nvar _c;\n$RefreshReg$(_c, \"CompactPlayer\");","map":{"version":3,"names":["React","useRef","useEffect","useState","IconButton","PlayCircleFilledIcon","PauseCircleFilledIcon","ExpandLessIcon","WaveSurferClass","jsxDEV","_jsxDEV","CompactPlayer","url","isPlay","setIsPlay","currentTime","setCurrentTime","setIsExpanded","_s","containerRef","wavesurferRef","isReady","setIsReady","current","create","container","waveColor","progressColor","cursorColor","responsive","height","barWidth","barGap","on","_wavesurferRef$curren","error","console","getCurrentTime","load","destroy","play","pause","handlePlayPause","style","display","alignItems","width","children","color","size","onClick","disabled","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","ref","flex","marginLeft","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/CompactPlayer.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport WaveSurfer from 'wavesurfer.js';\nimport { IconButton } from '@mui/material';\nimport PlayCircleFilledIcon from '@mui/icons-material/PlayCircleFilled';\nimport PauseCircleFilledIcon from '@mui/icons-material/PauseCircleFilled';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport WaveSurferClass from \"wavesurfer.js\";\n\ninterface CompactPlayerProps {\n  url: string;\n  isPlay: boolean;\n  setIsPlay: (play: boolean) => void;\n  currentTime: number;\n  setCurrentTime: (time: number) => void;\n  setIsExpanded: (expanded: boolean) => void;\n}\n\nconst CompactPlayer: React.FC<CompactPlayerProps> = ({\n  url,\n  isPlay,\n  setIsPlay,\n  currentTime,\n  setCurrentTime,\n  setIsExpanded,\n}) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const wavesurferRef = useRef<WaveSurferClass | null>(null);\n    const [isReady, setIsReady] = useState(false);\n  \n    useEffect(() => {\n      if (containerRef.current && !wavesurferRef.current) {\n        wavesurferRef.current = WaveSurferClass.create({\n          container: containerRef.current,\n          waveColor: \"#b7e1dd\",\n          progressColor: \"#4Db6AC\",\n          cursorColor: \"#357F78\",\n          responsive: true,\n          height: 40,\n          barWidth: 2,\n          barGap: 1,\n        });\n  \n        wavesurferRef.current.on('ready', () => {\n          setIsReady(true);\n          wavesurferRef.current?.setCurrentTime(currentTime);\n        });\n  \n        wavesurferRef.current.on('error', (error) => {\n          console.error('WaveSurfer error:', error);\n        });\n  \n        wavesurferRef.current.on('audioprocess', () => {\n          if (wavesurferRef.current && isReady) {\n            setCurrentTime(wavesurferRef.current.getCurrentTime());\n          }\n        });\n  \n        wavesurferRef.current.load(url);\n      }\n  \n      return () => {\n        if (wavesurferRef.current) {\n          wavesurferRef.current.destroy();\n        }\n      };\n    }, [url, currentTime, setCurrentTime]);\n  \n    useEffect(() => {\n      if (wavesurferRef.current && isReady) {\n        if (isPlay) {\n          wavesurferRef.current.play();\n        } else {\n          wavesurferRef.current.pause();\n        }\n      }\n    }, [isPlay, isReady]);\n  \n    const handlePlayPause = () => {\n      if (isReady) {\n        setIsPlay(!isPlay);\n      }\n    };\n\n  return (\n    <div style={{ display: \"flex\", alignItems: \"center\", width: \"100%\" }}>\n      <IconButton\n        color=\"primary\"\n        size=\"medium\"\n        onClick={handlePlayPause}\n        disabled={!isReady}\n      >\n        {isPlay ? <PauseCircleFilledIcon fontSize=\"large\" /> : <PlayCircleFilledIcon fontSize=\"large\" />}\n      </IconButton>\n      <div ref={containerRef} style={{ flex: 1, marginLeft: 10 }} />\n      <IconButton\n        color=\"primary\"\n        size=\"medium\"\n        onClick={() => setIsExpanded(true)}\n      >\n        <ExpandLessIcon fontSize=\"large\" />\n      </IconButton>\n    </div>\n  );\n};\n\nexport default CompactPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}