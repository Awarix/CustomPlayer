{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/ExpandedPlayer.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport { IconButton } from \"@mui/material\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport PlayCircleFilledIcon from \"@mui/icons-material/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@mui/icons-material/PauseCircleFilled\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\nconst ExpandedPlayer = ({\n  url,\n  isPlay,\n  togglePlay,\n  currentTime,\n  setCurrentTime,\n  zoom,\n  setZoom\n}) => {\n  _s();\n  const wavesurferRef = useRef(null);\n  useEffect(() => {\n    if (!wavesurferRef.current) {\n      wavesurferRef.current = WaveSurfer.create({\n        container: \"#waveform\",\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        responsive: true,\n        plugins: [TimelinePlugin.create({\n          container: \"#wave-timeline\",\n          height: 30\n        })]\n      });\n      wavesurferRef.current.load(url);\n      wavesurferRef.current.on(\"ready\", () => {\n        var _wavesurferRef$curren, _wavesurferRef$curren2;\n        (_wavesurferRef$curren = wavesurferRef.current) === null || _wavesurferRef$curren === void 0 ? void 0 : _wavesurferRef$curren.setCurrentTime(currentTime);\n        (_wavesurferRef$curren2 = wavesurferRef.current) === null || _wavesurferRef$curren2 === void 0 ? void 0 : _wavesurferRef$curren2.zoom(zoom);\n        if (isPlay) {\n          var _wavesurferRef$curren3;\n          (_wavesurferRef$curren3 = wavesurferRef.current) === null || _wavesurferRef$curren3 === void 0 ? void 0 : _wavesurferRef$curren3.play();\n        }\n      });\n      wavesurferRef.current.on(\"audioprocess\", () => {\n        if (wavesurferRef.current) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n      wavesurferRef.current.on(\"seek\", () => {\n        if (wavesurferRef.current) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n    }\n    return () => {\n      var _wavesurferRef$curren4;\n      (_wavesurferRef$curren4 = wavesurferRef.current) === null || _wavesurferRef$curren4 === void 0 ? void 0 : _wavesurferRef$curren4.destroy();\n      wavesurferRef.current = null;\n    };\n  }, [url, currentTime, zoom, isPlay, setCurrentTime]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.seekTo(currentTime / wavesurferRef.current.getDuration());\n    }\n  }, [currentTime]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.zoom(zoom);\n    }\n  }, [zoom]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: togglePlay,\n        children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 66\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: () => setZoom(zoom * 2),\n        children: /*#__PURE__*/_jsxDEV(ZoomInIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: () => setZoom(zoom / 2),\n        children: /*#__PURE__*/_jsxDEV(ZoomOutIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"waveform\",\n      style: {\n        width: \"100%\",\n        height: \"300px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"wave-timeline\",\n      style: {\n        width: \"100%\",\n        height: \"30px\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(ExpandedPlayer, \"Ve1r+mzzQeBar+xTzM4r6EeSaNw=\");\n_c = ExpandedPlayer;\nexport default ExpandedPlayer;\nvar _c;\n$RefreshReg$(_c, \"ExpandedPlayer\");","map":{"version":3,"names":["useEffect","useRef","IconButton","WaveSurfer","PlayCircleFilledIcon","PauseCircleFilledIcon","ZoomInIcon","ZoomOutIcon","jsxDEV","_jsxDEV","TimelinePlugin","require","ExpandedPlayer","url","isPlay","togglePlay","currentTime","setCurrentTime","zoom","setZoom","_s","wavesurferRef","current","create","container","waveColor","progressColor","cursorColor","responsive","plugins","height","load","on","_wavesurferRef$curren","_wavesurferRef$curren2","_wavesurferRef$curren3","play","getCurrentTime","_wavesurferRef$curren4","destroy","seekTo","getDuration","pause","children","color","size","onClick","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","id","style","width","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/ExpandedPlayer.tsx"],"sourcesContent":["import { FC, useEffect, useRef } from \"react\";\nimport { IconButton } from \"@mui/material\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport PlayCircleFilledIcon from \"@mui/icons-material/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@mui/icons-material/PauseCircleFilled\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\n\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\n\nconst ExpandedPlayer: FC<{\n  url: string;\n  isPlay: boolean;\n  togglePlay: () => void;\n  currentTime: number;\n  setCurrentTime: (time: number) => void;\n  zoom: number;\n  setZoom: (zoom: number) => void;\n}> = ({ url, isPlay, togglePlay, currentTime, setCurrentTime, zoom, setZoom }) => {\n  const wavesurferRef = useRef<WaveSurfer | null>(null);\n\n  useEffect(() => {\n    if (!wavesurferRef.current) {\n      wavesurferRef.current = WaveSurfer.create({\n        container: \"#waveform\",\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        responsive: true,\n        plugins: [\n          TimelinePlugin.create({\n            container: \"#wave-timeline\",\n            height: 30,\n          }),\n        ],\n      });\n\n      wavesurferRef.current.load(url);\n\n      wavesurferRef.current.on(\"ready\", () => {\n        wavesurferRef.current?.setCurrentTime(currentTime);\n        wavesurferRef.current?.zoom(zoom);\n        if (isPlay) {\n          wavesurferRef.current?.play();\n        }\n      });\n\n      wavesurferRef.current.on(\"audioprocess\", () => {\n        if (wavesurferRef.current) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n\n      wavesurferRef.current.on(\"seek\", () => {\n        if (wavesurferRef.current) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n    }\n\n    return () => {\n      wavesurferRef.current?.destroy();\n      wavesurferRef.current = null;\n    };\n  }, [url, currentTime, zoom, isPlay, setCurrentTime]);\n\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.seekTo(currentTime / wavesurferRef.current.getDuration());\n    }\n  }, [currentTime]);\n\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.zoom(zoom);\n    }\n  }, [zoom]);\n\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay]);\n\n  return (\n    <div>\n      <div>\n        <IconButton color=\"primary\" size=\"medium\" onClick={togglePlay}>\n          {isPlay ? <PauseCircleFilledIcon fontSize=\"large\" /> : <PlayCircleFilledIcon fontSize=\"large\" />}\n        </IconButton>\n        <IconButton color=\"primary\" size=\"medium\" onClick={() => setZoom(zoom * 2)}>\n          <ZoomInIcon fontSize=\"large\" />\n        </IconButton>\n        <IconButton color=\"primary\" size=\"medium\" onClick={() => setZoom(zoom / 2)}>\n          <ZoomOutIcon fontSize=\"large\" />\n        </IconButton>\n      </div>\n      <div id=\"waveform\" style={{ width: \"100%\", height: \"300px\" }} />\n      <div id=\"wave-timeline\" style={{ width: \"100%\", height: \"30px\" }} />\n    </div>\n  );\n};\n\nexport default ExpandedPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}