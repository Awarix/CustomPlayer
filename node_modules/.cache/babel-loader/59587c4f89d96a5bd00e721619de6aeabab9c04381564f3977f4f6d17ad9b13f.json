{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/CompactExtendKeywords.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { WaveSurfer, WaveForm } from \"wavesurfer-react\";\nimport { currTimeSubscriber } from \"../../subscribers/PlayerSubscriber\";\nimport WaveSurferClass from \"wavesurfer.js\";\n\n// icons\n\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport RotateLeftIcon from \"@material-ui/icons/RotateLeft\";\nimport RotateRightIcon from \"@material-ui/icons/RotateRight\";\nimport AllInclusiveIcon from \"@material-ui/icons/AllInclusive\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\nconst WordMarker = ({\n  keyword,\n  color,\n  wavesurfer,\n  zoom,\n  isReady,\n  channelCount\n}) => {\n  _s();\n  const markerRef = useRef(null);\n  useEffect(() => {\n    if (!isReady) return;\n    const updatePosition = () => {\n      if (markerRef.current && wavesurfer) {\n        const duration = wavesurfer.getDuration();\n        const containerWidth = wavesurfer.drawer.width;\n        const scrollLeft = wavesurfer.drawer.getScrollX();\n        const markerPosition = keyword.Start / duration * containerWidth;\n        const adjustedPosition = markerPosition - scrollLeft;\n        markerRef.current.style.left = `${adjustedPosition}px`;\n        markerRef.current.style.display = adjustedPosition >= 0 && adjustedPosition <= containerWidth ? 'block' : 'none';\n      }\n    };\n    updatePosition();\n    wavesurfer.on('scroll', updatePosition);\n    wavesurfer.on('zoom', updatePosition);\n    return () => {\n      wavesurfer.un('scroll', updatePosition);\n      wavesurfer.un('zoom', updatePosition);\n    };\n  }, [keyword, wavesurfer, zoom, isReady]);\n  const handleClick = () => {\n    wavesurfer.setCurrentTime(keyword.Start);\n  };\n  const markerHeight = channelCount === 1 ? '10%' : '100%';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: markerRef,\n    onClick: handleClick,\n    style: {\n      position: 'absolute',\n      top: 0,\n      height: markerHeight,\n      width: '2px',\n      backgroundColor: color,\n      cursor: 'pointer'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '-20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        backgroundColor: color,\n        padding: '2px 5px',\n        borderRadius: '3px',\n        color: 'white',\n        fontSize: '12px'\n      },\n      children: keyword.Name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(WordMarker, \"x5wWyXK0+mHGg2Y0I8gN07knkVQ=\");\n_c = WordMarker;\nconst CompactPlayer = ({\n  url,\n  isPlay,\n  setIsPlay,\n  currentTime,\n  setCurrentTime\n}) => {\n  _s2();\n  const containerRef = useRef(null);\n  const wavesurferRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  useEffect(() => {\n    if (containerRef.current && !wavesurferRef.current) {\n      wavesurferRef.current = WaveSurferClass.create({\n        container: containerRef.current,\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        responsive: true,\n        height: 40,\n        barWidth: 2,\n        barGap: 1\n      });\n      wavesurferRef.current.on('ready', () => {\n        var _wavesurferRef$curren;\n        setIsReady(true);\n        (_wavesurferRef$curren = wavesurferRef.current) === null || _wavesurferRef$curren === void 0 ? void 0 : _wavesurferRef$curren.setCurrentTime(currentTime);\n      });\n      wavesurferRef.current.on('error', error => {\n        console.error('WaveSurfer error:', error);\n      });\n      wavesurferRef.current.on('audioprocess', () => {\n        if (wavesurferRef.current && isReady) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n      wavesurferRef.current.load(url);\n    }\n    return () => {\n      if (wavesurferRef.current) {\n        wavesurferRef.current.destroy();\n      }\n    };\n  }, [url, currentTime, setCurrentTime]);\n  useEffect(() => {\n    if (wavesurferRef.current && isReady) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay, isReady]);\n  const handlePlayPause = () => {\n    if (isReady) {\n      setIsPlay(!isPlay);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        flexDirection: 'row',\n        justifyItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '1px solid',\n          width: '100px',\n          textAlign: 'center'\n        },\n        children: \"00:00 / 01:30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: 1,\n          marginLeft: 5\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          title: \"\\u041B\\u0435\\u0432\\u044B\\u0439 \\u043A\\u0430\\u043D\\u0430\\u043B\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/img/left-headset.png\",\n            alt: \"left headset\",\n            style: {\n              marginLeft: 2,\n              width: 16,\n              height: 27,\n              cursor: \"pointer\",\n              // borderRadius: \"0px 100% 100% 0px / 0px 50% 50% 0px\",\n              backgroundColor: 'blue'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          title: \"\\u041F\\u0440\\u0430\\u0432\\u044B\\u0439 \\u043A\\u0430\\u043D\\u0430\\u043B\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/img/right-headset.png\",\n            alt: \"right headset\",\n            style: {\n              width: 16,\n              height: 27,\n              backgroundColor: 'blue',\n              // borderRadius: \"100% 0px 0px 100% / 50% 0px 0px 50%\",\n              cursor: \"pointer\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IconButton\n      // onClick={() => seekBack()}\n      // className={classes.button}\n      // disabled={audioHasError}\n      , {\n        disableRipple: true,\n        color: \"primary\",\n        title: \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0430\\u044F \\u043F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F - 3 \\u0441\\u0435\\u043A.\",\n        children: /*#__PURE__*/_jsxDEV(RotateLeftIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: handlePlayPause,\n        disabled: !isReady,\n        children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 23\n        }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 68\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(IconButton\n      // onClick={() => seekForward()}\n      // className={classes.button}\n      // disabled={audioHasError}\n      , {\n        disableRipple: true,\n        color: \"primary\",\n        title: \"\\u0422\\u0435\\u043A\\u0443\\u0449\\u0430\\u044F \\u043F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F + 3 \\u0441\\u0435\\u043A.\",\n        children: /*#__PURE__*/_jsxDEV(RotateRightIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        flex: 1,\n        marginLeft: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IconButton\n    // onClick={download}\n    // className={classes.button}\n    // disabled={audioHasError}\n    , {\n      disableRipple: true,\n      color: \"primary\",\n      title: \"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C \\u0434\\u0435\\u043A\\u043E\\u0434\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043D\\u044B\\u0439 \\u0444\\u0430\\u0439\\u043B\",\n      children: /*#__PURE__*/_jsxDEV(GetAppIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IconButton\n    // className={classes.button}\n    // onClick={handleClick}\n    , {\n      title: \"\\u0412\\u043E\\u0441\\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u0435\\u0434\\u0435\\u043D\\u0438\\u0435 \\u0437\\u0430\\u0446\\u0438\\u043A\\u043B\\u0435\\u043D\\u043E\",\n      disableRipple: true,\n      color: \"primary\",\n      children: /*#__PURE__*/_jsxDEV(AllInclusiveIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(IconButton\n    // className={classes.button}\n    // onClick={handleClick}\n    , {\n      title: \"\\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\",\n      disableRipple: true,\n      color: \"primary\",\n      size: \"medium\",\n      children: /*#__PURE__*/_jsxDEV(SettingsIcon, {\n        fontSize: \"medium\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n};\n_s2(CompactPlayer, \"lrjWsmnCKXdt8OLBYFo6pOiM23E=\");\n_c2 = CompactPlayer;\nconst CompactExtendKeywords = ({\n  file,\n  activeSegmentProp,\n  url,\n  keywords,\n  channelCount\n}) => {\n  _s3();\n  const [isPlay, setIsPlay] = useState(false);\n  const [autoCenter, setAutoCenter] = useState(true);\n  const [zoom, setZoom] = useState(10);\n  const [activeSegment, setActiveSegment] = useState(activeSegmentProp);\n  const [isWavesurferReady, setIsWavesurferReady] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const plugins = useMemo(() => [{\n    plugin: TimelinePlugin,\n    options: {\n      container: \"#timeline\"\n    }\n  }], []);\n  const wavesurferRef = useRef(null);\n  const handleWSMount = useCallback(waveSurfer => {\n    wavesurferRef.current = waveSurfer;\n    wavesurferRef.current.load(url);\n    wavesurferRef.current.on(\"ready\", () => {\n      var _wavesurferRef$curren2;\n      setIsWavesurferReady(true); // Устанавливаем готовность\n      (_wavesurferRef$curren2 = wavesurferRef.current) === null || _wavesurferRef$curren2 === void 0 ? void 0 : _wavesurferRef$curren2.setCurrentTime(currentTime);\n      if (isPlay) {\n        var _wavesurferRef$curren3;\n        (_wavesurferRef$curren3 = wavesurferRef.current) === null || _wavesurferRef$curren3 === void 0 ? void 0 : _wavesurferRef$curren3.play();\n      }\n    });\n    wavesurferRef.current.on(\"audioprocess\", () => {\n      if (wavesurferRef.current) {\n        setCurrentTime(wavesurferRef.current.getCurrentTime());\n      }\n    });\n  }, [url, currentTime, isPlay]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.seekTo(currentTime / wavesurferRef.current.getDuration());\n    }\n  }, [currentTime]);\n  const setZoomClick = zoom => {\n    if (zoom < 5) zoom = 5;\n    if (zoom > 1000) zoom = 1000;\n    setZoom(zoom);\n  };\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    setZoom(10);\n    if (url === \"\") return;\n    wavesurferRef.current.load(url);\n  }, [file, url]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.zoom(zoom);\n      wavesurferRef.current.fireEvent('zoom', zoom);\n    }\n  }, [zoom]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    if (isPlay) {\n      wavesurferRef.current.play();\n    } else {\n      wavesurferRef.current.pause();\n    }\n  }, [isPlay]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    setActiveSegment(activeSegmentProp);\n    if (activeSegmentProp) {\n      let zoomFactor = 500;\n      const width = wavesurferRef.current.drawer.wrapper.clientWidth;\n      const segmentDuration = activeSegmentProp.End - activeSegmentProp.Start;\n      for (let i = 0; i < 10; i++) {\n        if (segmentDuration * zoomFactor < width) break;\n        zoomFactor /= 2;\n      }\n      if (zoomFactor < 5) zoomFactor = 5;\n      setZoomClick(zoomFactor);\n      setAutoCenter(false);\n      setIsPlay(true);\n      const total = wavesurferRef.current.getDuration();\n      if (total > 0) {\n        const centerTime = activeSegmentProp.Start + segmentDuration / 2;\n        const t1 = centerTime / total;\n        wavesurferRef.current.zoom(zoomFactor);\n        wavesurferRef.current.seekAndCenter(t1);\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n        wavesurferRef.current.play();\n      }\n    }\n    const subscription = currTimeSubscriber.subscribe(currentTime => {\n      if (wavesurferRef.current && activeSegmentProp && currentTime >= activeSegmentProp.End) {\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [activeSegmentProp]);\n\n  // обработчик нажатия клавиш\n  const handleKeyDown = useCallback(event => {\n    var _document$activeEleme, _document$activeEleme2;\n    if (!wavesurferRef.current) {\n      return;\n    }\n    const {\n      key,\n      ctrlKey\n    } = event;\n    let isNeedExKey = ((_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.tagName) === \"TEXTAREA\";\n    isNeedExKey = isNeedExKey || ((_document$activeEleme2 = document.activeElement) === null || _document$activeEleme2 === void 0 ? void 0 : _document$activeEleme2.tagName) === \"INPUT\";\n    let isEx = true;\n    if (isNeedExKey) {\n      isEx = ctrlKey;\n    }\n    if (key === \" \" && isEx) {\n      setIsPlay(prev => !prev);\n    }\n    if ((key === \"a\" || key === \"d\" || key === \"ф\" || key === \"в\") && isEx) {\n      let diff = 5;\n      if (activeSegment !== null) diff = 1;\n      if (key === \"a\" || key === \"ф\") diff *= -1;\n      const total = wavesurferRef.current.getDuration();\n      let need = wavesurferRef.current.getCurrentTime() + diff;\n      if (need < 0) need = 0;\n      if (need > total) need = total;\n      wavesurferRef.current.setCurrentTime(need);\n      setIsPlay(true);\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }, [activeSegment]);\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [handleKeyDown]);\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 3,\n    style: {\n      position: \"fixed\",\n      bottom: 0,\n      left: 0,\n      width: \"100%\",\n      zIndex: 1000,\n      padding: \"10px\",\n      boxSizing: \"border-box\",\n      transition: \"height 0.3s ease\",\n      height: isExpanded ? \"400px\" : \"100px\",\n      overflow: isExpanded ? \"auto\" : \"hidden\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      },\n      children: [isExpanded ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"primary\",\n          size: \"medium\",\n          onClick: () => setIsPlay(prev => !prev),\n          children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n            fontSize: \"large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 25\n          }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n            fontSize: \"large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 70\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"primary\",\n          size: \"medium\",\n          title: \"\\u0423\\u0432\\u0435\\u043B\\u0438\\u0447\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n          onClick: () => setZoomClick(zoom * 2),\n          children: /*#__PURE__*/_jsxDEV(ZoomInIcon, {\n            fontSize: \"large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"primary\",\n          size: \"medium\",\n          title: \"\\u0423\\u043C\\u0435\\u043D\\u044C\\u0448\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n          onClick: () => setZoomClick(zoom / 2),\n          children: /*#__PURE__*/_jsxDEV(ZoomOutIcon, {\n            fontSize: \"large\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(CompactPlayer, {\n          url: url,\n          isPlay: isPlay,\n          setIsPlay: setIsPlay,\n          currentTime: currentTime,\n          setCurrentTime: setCurrentTime\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this), isWavesurferReady && wavesurferRef.current && keywords.map((kw, index) => /*#__PURE__*/_jsxDEV(WordMarker, {\n          keyword: kw.keyword,\n          color: kw.color,\n          wavesurfer: wavesurferRef.current,\n          zoom: zoom,\n          isReady: isWavesurferReady // Это условие должно быть true\n          ,\n          channelCount: channelCount\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: () => setIsExpanded(prev => !prev),\n        children: isExpanded ? /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(ExpandLessIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 63\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"100%\",\n        position: \"relative\",\n        marginTop: \"10px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(WaveSurfer, {\n        onMount: handleWSMount,\n        plugins: plugins,\n        children: [/*#__PURE__*/_jsxDEV(WaveForm, {\n          id: \"waveform\",\n          waveColor: \"#b7e1dd\",\n          progressColor: \"#4Db6AC\",\n          cursorColor: \"#357F78\",\n          autoCenter: autoCenter,\n          splitChannels: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: \"20px\"\n          },\n          id: \"timeline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 11\n      }, this), isExpanded && isWavesurferReady && wavesurferRef.current && keywords.map((kw, index) => /*#__PURE__*/_jsxDEV(WordMarker, {\n        keyword: kw.keyword,\n        color: kw.color,\n        wavesurfer: wavesurferRef.current,\n        zoom: zoom,\n        isReady: isWavesurferReady // Это условие должно быть true\n        ,\n        channelCount: channelCount\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 438,\n    columnNumber: 7\n  }, this);\n};\n_s3(CompactExtendKeywords, \"G2Rvzo131MbFHqL6b3GltcsASCk=\");\n_c3 = CompactExtendKeywords;\nexport default CompactExtendKeywords;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"WordMarker\");\n$RefreshReg$(_c2, \"CompactPlayer\");\n$RefreshReg$(_c3, \"CompactExtendKeywords\");","map":{"version":3,"names":["useMemo","useRef","useState","useEffect","useCallback","IconButton","PlayCircleFilledIcon","PauseCircleFilledIcon","ZoomInIcon","ZoomOutIcon","ExpandLessIcon","ExpandMoreIcon","Paper","WaveSurfer","WaveForm","currTimeSubscriber","WaveSurferClass","GetAppIcon","RotateLeftIcon","RotateRightIcon","AllInclusiveIcon","SettingsIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","TimelinePlugin","require","WordMarker","keyword","color","wavesurfer","zoom","isReady","channelCount","_s","markerRef","updatePosition","current","duration","getDuration","containerWidth","drawer","width","scrollLeft","getScrollX","markerPosition","Start","adjustedPosition","style","left","display","on","un","handleClick","setCurrentTime","markerHeight","ref","onClick","position","top","height","backgroundColor","cursor","children","transform","padding","borderRadius","fontSize","Name","fileName","_jsxFileName","lineNumber","columnNumber","_c","CompactPlayer","url","isPlay","setIsPlay","currentTime","_s2","containerRef","wavesurferRef","setIsReady","create","container","waveColor","progressColor","cursorColor","responsive","barWidth","barGap","_wavesurferRef$curren","error","console","getCurrentTime","load","destroy","play","pause","handlePlayPause","alignItems","flexDirection","justifyItems","border","textAlign","gap","marginLeft","title","src","alt","disableRipple","size","disabled","flex","_c2","CompactExtendKeywords","file","activeSegmentProp","keywords","_s3","autoCenter","setAutoCenter","setZoom","activeSegment","setActiveSegment","isWavesurferReady","setIsWavesurferReady","isExpanded","setIsExpanded","plugins","plugin","options","handleWSMount","waveSurfer","_wavesurferRef$curren2","_wavesurferRef$curren3","seekTo","setZoomClick","fireEvent","zoomFactor","wrapper","clientWidth","segmentDuration","End","i","total","centerTime","t1","seekAndCenter","subscription","subscribe","unsubscribe","handleKeyDown","event","_document$activeEleme","_document$activeEleme2","key","ctrlKey","isNeedExKey","document","activeElement","tagName","isEx","prev","diff","need","preventDefault","stopPropagation","window","addEventListener","removeEventListener","elevation","bottom","zIndex","boxSizing","transition","overflow","justifyContent","map","kw","index","marginTop","onMount","id","splitChannels","_c3","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/CompactExtendKeywords.tsx"],"sourcesContent":["import { FC, useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { WaveSurfer, WaveForm } from \"wavesurfer-react\";\nimport { currTimeSubscriber } from \"../../subscribers/PlayerSubscriber\";\nimport { SegmentModel as Segment } from \"../AudioContext\";\nimport WaveSurferClass from \"wavesurfer.js\";\n\n// icons\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport PauseIcon from \"@material-ui/icons/Pause\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport RotateLeftIcon from \"@material-ui/icons/RotateLeft\";\nimport RotateRightIcon from \"@material-ui/icons/RotateRight\";\nimport AllInclusiveIcon from \"@material-ui/icons/AllInclusive\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\n\ninterface KeywordColor {\n  keyword: {\n    Start: number;\n    Name: string;\n    ChannelNumber: number;\n    Confidence: number;\n  };\n  color: string;\n}\n\ninterface Props {\n  file: File | null;\n  activeSegmentProp: Segment | null;\n  url: string;\n  keywords: KeywordColor[];\n  channelCount: number;\n}\n\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\n\nconst WordMarker: FC<{keyword: KeywordColor['keyword'], color: string, wavesurfer: any, zoom: number, isReady: boolean, channelCount: number}> = ({ keyword, color, wavesurfer, zoom, isReady, channelCount }) => {\n    const markerRef = useRef<HTMLDivElement>(null);\n  \n    useEffect(() => {\n        if (!isReady) return;\n      const updatePosition = () => {\n        if (markerRef.current && wavesurfer) {\n          const duration = wavesurfer.getDuration();\n          const containerWidth = wavesurfer.drawer.width;\n          const scrollLeft = wavesurfer.drawer.getScrollX();\n  \n          const markerPosition = (keyword.Start / duration) * containerWidth;\n          const adjustedPosition = markerPosition - scrollLeft;\n  \n          markerRef.current.style.left = `${adjustedPosition}px`;\n          markerRef.current.style.display = adjustedPosition >= 0 && adjustedPosition <= containerWidth ? 'block' : 'none';\n        }\n      };\n  \n      updatePosition();\n      wavesurfer.on('scroll', updatePosition);\n      wavesurfer.on('zoom', updatePosition);\n  \n      return () => {\n        wavesurfer.un('scroll', updatePosition);\n        wavesurfer.un('zoom', updatePosition);\n      };\n    }, [keyword, wavesurfer, zoom, isReady]);\n\n  const handleClick = () => {\n    wavesurfer.setCurrentTime(keyword.Start);\n  };\n\n  const markerHeight = channelCount === 1 ? '10%' : '100%';\n  \n\n  return (\n    <div\n      ref={markerRef}\n      onClick={handleClick}\n      style={{\n        position: 'absolute',\n        top: 0,\n        height: markerHeight,\n        width: '2px',\n        backgroundColor: color,\n        cursor: 'pointer',\n      }}\n    >\n      <div\n        style={{\n          position: 'absolute',\n          top: '-20px',\n          left: '50%',\n          transform: 'translateX(-50%)',\n          backgroundColor: color,\n          padding: '2px 5px',\n          borderRadius: '3px',\n          color: 'white',\n          fontSize: '12px',\n        }}\n      >\n        {keyword.Name}\n      </div>\n    </div>\n  );\n};\n\nconst CompactPlayer: FC<{ url: string; isPlay: boolean; setIsPlay: (play: boolean) => void; currentTime: number; setCurrentTime: (time: number) => void }> = \n({ url, isPlay, setIsPlay, currentTime, setCurrentTime }) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const wavesurferRef = useRef<WaveSurferClass | null>(null);\n  const [isReady, setIsReady] = useState(false);\n\n  useEffect(() => {\n    if (containerRef.current && !wavesurferRef.current) {\n      wavesurferRef.current = WaveSurferClass.create({\n        container: containerRef.current,\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        responsive: true,\n        height: 40,\n        barWidth: 2,\n        barGap: 1,\n      });\n\n      wavesurferRef.current.on('ready', () => {\n        setIsReady(true);\n        wavesurferRef.current?.setCurrentTime(currentTime);\n      });\n\n      wavesurferRef.current.on('error', (error) => {\n        console.error('WaveSurfer error:', error);\n      });\n\n      wavesurferRef.current.on('audioprocess', () => {\n        if (wavesurferRef.current && isReady) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n\n      wavesurferRef.current.load(url);\n    }\n\n    return () => {\n      if (wavesurferRef.current) {\n        wavesurferRef.current.destroy();\n      }\n    };\n  }, [url, currentTime, setCurrentTime]);\n\n  useEffect(() => {\n    if (wavesurferRef.current && isReady) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay, isReady]);\n\n  const handlePlayPause = () => {\n    if (isReady) {\n      setIsPlay(!isPlay);\n    }\n  };\n\n  return (\n    <div style={{ display: \"flex\", alignItems: \"center\", width: \"100%\" }}>\n      <div style={{ display: \"flex\", alignItems: \"center\", flexDirection: 'row', justifyItems: 'center'}}>\n        <div style={{border: '1px solid', width: '100px', textAlign: 'center'}}>\n              00:00 / 01:30\n        </div>\n            <div style={{display: \"flex\", gap: 1, marginLeft: 5}}>\n              <div title=\"Левый канал\">\n                <img src=\"/img/left-headset.png\" alt=\"left headset\" \n                style={{\n                  marginLeft: 2,\n                    width: 16,\n                    height: 27,\n                    cursor: \"pointer\",\n                    // borderRadius: \"0px 100% 100% 0px / 0px 50% 50% 0px\",\n                    backgroundColor: 'blue',\n                }}\n                />\n              </div>\n              <div title=\"Правый канал\">\n                <img src=\"/img/right-headset.png\" alt=\"right headset\" \n                  style={{\n                    width: 16,\n                    height: 27,\n                    backgroundColor: 'blue',\n                    // borderRadius: \"100% 0px 0px 100% / 50% 0px 0px 50%\",\n                    cursor: \"pointer\",\n                  }}\n                />\n              </div>\n            </div>\n          \n          <IconButton\n            // onClick={() => seekBack()}\n            // className={classes.button}\n            // disabled={audioHasError}\n            disableRipple\n            color=\"primary\"\n            title=\"Текущая позиция - 3 сек.\"\n          >\n            <RotateLeftIcon />\n          </IconButton>\n          <IconButton\n            color=\"primary\"\n            size=\"medium\"\n            onClick={handlePlayPause}\n            disabled={!isReady}\n          >\n            {isPlay ? <PauseCircleFilledIcon fontSize=\"large\" /> : <PlayCircleFilledIcon fontSize=\"large\" />}\n          </IconButton>\n          <IconButton\n            // onClick={() => seekForward()}\n            // className={classes.button}\n            // disabled={audioHasError}\n            disableRipple\n            color=\"primary\"\n            title=\"Текущая позиция + 3 сек.\"\n          >\n            <RotateRightIcon />\n          </IconButton>\n         \n         \n        </div>\n      <div ref={containerRef} style={{ flex: 1, marginLeft: 10 }} />\n      <IconButton\n            // onClick={download}\n            // className={classes.button}\n            // disabled={audioHasError}\n            disableRipple\n            color=\"primary\"\n            title=\"Скачать декодированный файл\"\n          >\n            <GetAppIcon />\n          </IconButton>\n\n          <IconButton\n            // className={classes.button}\n            // onClick={handleClick}\n            title=\"Воспроизведение зациклено\"\n            disableRipple\n            color=\"primary\"\n          >\n            <AllInclusiveIcon />\n          </IconButton>\n          <IconButton\n            // className={classes.button}\n            // onClick={handleClick}\n            title=\"Настройки\"\n            disableRipple\n            color=\"primary\"\n            size=\"medium\"\n          >\n            <SettingsIcon fontSize=\"medium\"/>\n          </IconButton>\n    </div>\n  );\n};\n\n\n\nconst CompactExtendKeywords: FC<Props> = ({ file, activeSegmentProp, url, keywords, channelCount }) => {\n    const [isPlay, setIsPlay] = useState<boolean>(false);\n    const [autoCenter, setAutoCenter] = useState<boolean>(true);\n    const [zoom, setZoom] = useState<number>(10);\n    const [activeSegment, setActiveSegment] = useState<Segment | null>(activeSegmentProp);\n    const [isWavesurferReady, setIsWavesurferReady] = useState<boolean>(false);\n    const [isExpanded, setIsExpanded] = useState<boolean>(false);\n    const [currentTime, setCurrentTime] = useState<number>(0);\n  \n    const plugins = useMemo(() => [\n      {\n        plugin: TimelinePlugin,\n        options: { container: \"#timeline\" },\n      },\n    ], []);\n  \n    const wavesurferRef = useRef<any>(null);\n  \n    const handleWSMount = useCallback((waveSurfer) => {\n      wavesurferRef.current = waveSurfer;\n      wavesurferRef.current.load(url);\n  \n      wavesurferRef.current.on(\"ready\", () => {\n          setIsWavesurferReady(true);  // Устанавливаем готовность\n          wavesurferRef.current?.setCurrentTime(currentTime);\n          if (isPlay) {\n              wavesurferRef.current?.play();\n          }\n      });\n  \n      wavesurferRef.current.on(\"audioprocess\", () => {\n          if (wavesurferRef.current) {\n              setCurrentTime(wavesurferRef.current.getCurrentTime());\n          }\n      });\n  }, [url, currentTime, isPlay]);\n\n    useEffect(() => {\n      if (wavesurferRef.current) {\n        wavesurferRef.current.seekTo(currentTime / wavesurferRef.current.getDuration());\n      }\n    }, [currentTime]);\n  \n    const setZoomClick = (zoom: number) => {\n      if (zoom < 5) zoom = 5;\n      if (zoom > 1000) zoom = 1000;\n      setZoom(zoom);\n    };\n  \n    useEffect(() => {\n      if (!wavesurferRef.current) return;\n  \n      setZoom(10);\n  \n      if (url === \"\") return;\n  \n      wavesurferRef.current.load(url);\n    }, [file, url]);\n  \n    useEffect(() => {\n        if (wavesurferRef.current) {\n        wavesurferRef.current.zoom(zoom);\n        wavesurferRef.current.fireEvent('zoom', zoom);\n        }\n    }, [zoom]);\n  \n    useEffect(() => {\n      if (!wavesurferRef.current) return;\n  \n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }, [isPlay]);\n  \n    useEffect(() => {\n      if (!wavesurferRef.current) return;\n  \n      setActiveSegment(activeSegmentProp);\n  \n      if (activeSegmentProp) {\n        let zoomFactor = 500;\n        const width = wavesurferRef.current.drawer.wrapper.clientWidth;\n        const segmentDuration = activeSegmentProp.End - activeSegmentProp.Start;\n  \n        for (let i = 0; i < 10; i++) {\n          if (segmentDuration * zoomFactor < width) break;\n          zoomFactor /= 2;\n        }\n        if (zoomFactor < 5) zoomFactor = 5;\n  \n        setZoomClick(zoomFactor);\n        setAutoCenter(false);\n        setIsPlay(true);\n  \n        const total = wavesurferRef.current.getDuration();\n        if (total > 0) {\n          const centerTime = activeSegmentProp.Start + (segmentDuration) / 2;\n          const t1 = centerTime / total;\n  \n          wavesurferRef.current.zoom(zoomFactor);\n          wavesurferRef.current.seekAndCenter(t1);\n          wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n          wavesurferRef.current.play();\n        }\n      }\n  \n      const subscription = currTimeSubscriber.subscribe(currentTime => {\n        if (wavesurferRef.current && activeSegmentProp && currentTime >= activeSegmentProp.End) {\n          wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n        }\n      });\n  \n      return () => {\n        subscription.unsubscribe();\n      };\n    }, [activeSegmentProp]);\n\n    // обработчик нажатия клавиш\n    const handleKeyDown = useCallback(\n        (event) => {\n          if (!wavesurferRef.current) {\n            return;\n          }\n    \n          const { key, ctrlKey } = event;\n          let isNeedExKey = document.activeElement?.tagName === \"TEXTAREA\";\n          isNeedExKey = isNeedExKey || document.activeElement?.tagName === \"INPUT\";\n          let isEx = true;\n          if (isNeedExKey) {\n            isEx = ctrlKey;\n          }\n    \n          if (key === \" \" && isEx) {\n            setIsPlay((prev) => !prev);\n          }\n    \n          if ((key === \"a\" || key === \"d\" || key === \"ф\" || key === \"в\") && isEx) {\n            let diff = 5;\n            if (activeSegment !== null) diff = 1;\n            if (key === \"a\" || key === \"ф\") diff *= -1;\n    \n            const total = wavesurferRef.current.getDuration();\n            let need = wavesurferRef.current.getCurrentTime() + diff;\n            if (need < 0) need = 0;\n            if (need > total) need = total;\n    \n            wavesurferRef.current.setCurrentTime(need);\n            setIsPlay(true);\n\n            event.preventDefault();\n            event.stopPropagation();\n          }\n        },\n        [activeSegment]\n    );\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", handleKeyDown);\n        return () => {\n            window.removeEventListener(\"keydown\", handleKeyDown);\n        };\n    }, [handleKeyDown]);\n\n    return (\n      <Paper\n      elevation={3}\n      style={{\n        position: \"fixed\",\n        bottom: 0,\n        left: 0,\n        width: \"100%\",\n        zIndex: 1000,\n        padding: \"10px\",\n        boxSizing: \"border-box\",\n        transition: \"height 0.3s ease\",\n        height: isExpanded ? \"400px\" : \"100px\",\n        overflow: isExpanded ? \"auto\" : \"hidden\",\n      }}\n    >\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n        {isExpanded ? (\n          <div>\n            <IconButton\n              color=\"primary\"\n              size=\"medium\"\n              onClick={() => setIsPlay((prev) => !prev)}\n            >\n              {isPlay ? <PauseCircleFilledIcon fontSize=\"large\" /> : <PlayCircleFilledIcon fontSize=\"large\" />}\n            </IconButton>\n            <IconButton\n              color=\"primary\"\n              size=\"medium\"\n              title=\"Увеличить масштаб\"\n              onClick={() => setZoomClick(zoom * 2)}\n            >\n              <ZoomInIcon fontSize=\"large\" />\n            </IconButton>\n            <IconButton\n              color=\"primary\"\n              size=\"medium\"\n              title=\"Уменьшить масштаб\"\n              onClick={() => setZoomClick(zoom / 2)}\n            >\n              <ZoomOutIcon fontSize=\"large\" />\n            </IconButton>\n          </div>\n        ) : (\n          <>\n            <CompactPlayer url={url} isPlay={isPlay} setIsPlay={setIsPlay} currentTime={currentTime} setCurrentTime={setCurrentTime}/>\n            {isWavesurferReady && wavesurferRef.current && keywords.map((kw, index) => (\n                <WordMarker\n                    key={index}\n                    keyword={kw.keyword}\n                    color={kw.color}\n                    wavesurfer={wavesurferRef.current}\n                    zoom={zoom}\n                    isReady={isWavesurferReady}   // Это условие должно быть true\n                    channelCount={channelCount}\n                />\n            ))}\n          </>\n        )}\n        <IconButton\n          color=\"primary\"\n          size=\"medium\"\n          onClick={() => setIsExpanded((prev) => !prev)}\n        >\n          {isExpanded ? <ExpandMoreIcon fontSize=\"large\" /> : <ExpandLessIcon fontSize=\"large\" />}\n        </IconButton>\n      </div>\n      {isExpanded && (\n        <div style={{ width: \"100%\", position: \"relative\", marginTop: \"10px\" }}>\n          <WaveSurfer onMount={handleWSMount} plugins={plugins}>\n            <WaveForm\n              id=\"waveform\"\n              waveColor=\"#b7e1dd\"\n              progressColor=\"#4Db6AC\"\n              cursorColor=\"#357F78\"\n              autoCenter={autoCenter}\n              splitChannels={true}\n            />\n            <div style={{ height: \"20px\" }} id=\"timeline\" />\n          </WaveSurfer>\n\n          {isExpanded && isWavesurferReady && wavesurferRef.current && keywords.map((kw, index) => (\n            <WordMarker\n                key={index}\n                keyword={kw.keyword}\n                color={kw.color}\n                wavesurfer={wavesurferRef.current}\n                zoom={zoom}\n                isReady={isWavesurferReady}  // Это условие должно быть true\n                channelCount={channelCount}\n            />\n        ))}\n        </div>\n      )}\n    </Paper>\n    );\n};\n\nexport default CompactExtendKeywords;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}