{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/test2Players/Parrent.tsx\",\n  _s = $RefreshSig$();\nimport { useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport { currTimeSubscriber } from \"../../../subscribers/PlayerSubscriber\";\nimport WaveSurferDisplay from \"./Player1\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\nconst Test2Players = ({\n  file,\n  activeSegmentProp,\n  url,\n  keywords,\n  channelCount\n}) => {\n  _s();\n  const [isPlay, setIsPlay] = useState(false);\n  const [autoCenter, setAutoCenter] = useState(true);\n  const [zoom, setZoom] = useState(10);\n  const [activeSegment, setActiveSegment] = useState(activeSegmentProp);\n  const [isWavesurferReady, setIsWavesurferReady] = useState(false);\n  const plugins = useMemo(() => [{\n    plugin: TimelinePlugin,\n    options: {\n      container: \"#timeline\"\n    }\n  }], []);\n  const wavesurferRef = useRef(null);\n  let time = 31;\n  useEffect(() => {\n    wavesurferRef.current.seekTo(0.5);\n  }, [wavesurferRef]);\n  const handleWSMount = useCallback(waveSurfer => {\n    wavesurferRef.current = waveSurfer;\n    wavesurferRef.current.load(url);\n    wavesurferRef.current.on(\"ready\", () => {\n      console.log(\"WaveSurfer is ready\");\n      setIsWavesurferReady(true);\n    });\n    let lastTime = 0;\n    wavesurferRef.current.on(\"audioprocess\", currentTime => {\n      const diff = Math.abs(currentTime - lastTime);\n      if (diff > 0.1) {\n        lastTime = currentTime;\n        currTimeSubscriber.next(currentTime);\n      }\n    });\n  }, [url]);\n  const setZoomClick = zoom => {\n    if (zoom < 5) zoom = 5;\n    if (zoom > 1000) zoom = 1000;\n    setZoom(zoom);\n  };\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    setZoom(10);\n    if (url === \"\") return;\n    wavesurferRef.current.load(url);\n  }, [file, url]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      wavesurferRef.current.zoom(zoom);\n      wavesurferRef.current.fireEvent('zoom', zoom);\n    }\n  }, [zoom]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    if (isPlay) {\n      wavesurferRef.current.play();\n    } else {\n      wavesurferRef.current.pause();\n    }\n  }, [isPlay]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    setActiveSegment(activeSegmentProp);\n    if (activeSegmentProp) {\n      let zoomFactor = 500;\n      const width = wavesurferRef.current.drawer.wrapper.clientWidth;\n      const segmentDuration = activeSegmentProp.End - activeSegmentProp.Start;\n      for (let i = 0; i < 10; i++) {\n        if (segmentDuration * zoomFactor < width) break;\n        zoomFactor /= 2;\n      }\n      if (zoomFactor < 5) zoomFactor = 5;\n      setZoomClick(zoomFactor);\n      setAutoCenter(false);\n      setIsPlay(true);\n      const total = wavesurferRef.current.getDuration();\n      if (total > 0) {\n        const centerTime = activeSegmentProp.Start + segmentDuration / 2;\n        const t1 = centerTime / total;\n        wavesurferRef.current.zoom(zoomFactor);\n        wavesurferRef.current.seekAndCenter(t1);\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n        wavesurferRef.current.play();\n      }\n    }\n    const subscription = currTimeSubscriber.subscribe(currentTime => {\n      if (wavesurferRef.current && activeSegmentProp && currentTime >= activeSegmentProp.End) {\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [activeSegmentProp]);\n\n  // обработчик нажатия клавиш\n  const handleKeyDown = useCallback(event => {\n    var _document$activeEleme, _document$activeEleme2;\n    if (!wavesurferRef.current) {\n      return;\n    }\n    const {\n      key,\n      ctrlKey\n    } = event;\n    let isNeedExKey = ((_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.tagName) === \"TEXTAREA\";\n    isNeedExKey = isNeedExKey || ((_document$activeEleme2 = document.activeElement) === null || _document$activeEleme2 === void 0 ? void 0 : _document$activeEleme2.tagName) === \"INPUT\";\n    let isEx = true;\n    if (isNeedExKey) {\n      isEx = ctrlKey;\n    }\n    if (key === \" \" && isEx) {\n      setIsPlay(prev => !prev);\n    }\n\n    //   if ((key === \"w\" || key === \"s\") && isEx) {\n    //     event.preventDefault();\n    //     event.stopPropagation();\n    //   }\n\n    if ((key === \"a\" || key === \"d\" || key === \"ф\" || key === \"в\") && isEx) {\n      let diff = 5;\n      if (activeSegment !== null) diff = 1;\n      if (key === \"a\" || key === \"ф\") diff *= -1;\n      const total = wavesurferRef.current.getDuration();\n      let need = wavesurferRef.current.getCurrentTime() + diff;\n      if (need < 0) need = 0;\n      if (need > total) need = total;\n      wavesurferRef.current.setCurrentTime(need);\n      setIsPlay(true);\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }, [activeSegment]);\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [handleKeyDown]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100%\",\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(WaveSurferDisplay, {\n      onMount: handleWSMount,\n      plugins: plugins,\n      zoom: zoom,\n      autoCenter: autoCenter,\n      isWavesurferReady: isWavesurferReady,\n      keywords: keywords,\n      channelCount: channelCount,\n      wavesurferRef: wavesurferRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: \"80px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: e => {\n          document.activeElement.blur();\n          setIsPlay(prev => !prev);\n        },\n        children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 27\n        }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 72\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        title: \"\\u0423\\u0432\\u0435\\u043B\\u0438\\u0447\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n        onClick: e => {\n          document.activeElement.blur();\n          setZoomClick(zoom * 2);\n        },\n        children: /*#__PURE__*/_jsxDEV(ZoomInIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        title: \"\\u0423\\u043C\\u0435\\u043D\\u044C\\u0448\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n        onClick: e => {\n          document.activeElement.blur();\n          setZoomClick(zoom / 2);\n        },\n        children: /*#__PURE__*/_jsxDEV(ZoomOutIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 7\n  }, this);\n};\n_s(Test2Players, \"2b3w3i7/CE+tA6NpxpJPYhlE2Cs=\");\n_c = Test2Players;\nexport default Test2Players;\nvar _c;\n$RefreshReg$(_c, \"Test2Players\");","map":{"version":3,"names":["useMemo","useRef","useState","useEffect","useCallback","IconButton","PlayCircleFilledIcon","PauseCircleFilledIcon","ZoomInIcon","ZoomOutIcon","currTimeSubscriber","WaveSurferDisplay","jsxDEV","_jsxDEV","TimelinePlugin","require","Test2Players","file","activeSegmentProp","url","keywords","channelCount","_s","isPlay","setIsPlay","autoCenter","setAutoCenter","zoom","setZoom","activeSegment","setActiveSegment","isWavesurferReady","setIsWavesurferReady","plugins","plugin","options","container","wavesurferRef","time","current","seekTo","handleWSMount","waveSurfer","load","on","console","log","lastTime","currentTime","diff","Math","abs","next","setZoomClick","fireEvent","play","pause","zoomFactor","width","drawer","wrapper","clientWidth","segmentDuration","End","Start","i","total","getDuration","centerTime","t1","seekAndCenter","setCurrentTime","subscription","subscribe","unsubscribe","handleKeyDown","event","_document$activeEleme","_document$activeEleme2","key","ctrlKey","isNeedExKey","document","activeElement","tagName","isEx","prev","need","getCurrentTime","preventDefault","stopPropagation","window","addEventListener","removeEventListener","style","position","children","onMount","fileName","_jsxFileName","lineNumber","columnNumber","height","color","size","onClick","e","blur","fontSize","title","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/test2Players/Parrent.tsx"],"sourcesContent":["import { FC, useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport { WaveSurfer, WaveForm } from \"wavesurfer-react\";\nimport { currTimeSubscriber } from \"../../../subscribers/PlayerSubscriber\";\nimport { SegmentModel as Segment } from \"../../AudioContext\";\nimport WaveSurferDisplay from \"./Player1\";\n\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\n\ninterface KeywordColor {\n  keyword: {\n    Start: number;\n    Name: string;\n    ChannelNumber: number;\n    Confidence: number;\n  };\n  color: string;\n}\n\ninterface Props {\n  file: File | null;\n  activeSegmentProp: Segment | null;\n  url: string;\n  keywords: KeywordColor[];\n  channelCount: number;\n}\n\n\n\nconst Test2Players: FC<Props> = ({ file, activeSegmentProp, url, keywords, channelCount }) => {\n    const [isPlay, setIsPlay] = useState<boolean>(false);\n    const [autoCenter, setAutoCenter] = useState<boolean>(true);\n    const [zoom, setZoom] = useState<number>(10);\n    const [activeSegment, setActiveSegment] = useState<Segment | null>(activeSegmentProp);\n    const [isWavesurferReady, setIsWavesurferReady] = useState<boolean>(false);\n  \n    const plugins = useMemo(() => [\n      {\n        plugin: TimelinePlugin,\n        options: { container: \"#timeline\" },\n      },\n    ], []);\n  \n    const wavesurferRef = useRef<any>(null);\n\n    let time = 31;\n\n    useEffect(() => {\n        wavesurferRef.current.seekTo(0.5);\n    },[wavesurferRef])\n  \n    const handleWSMount = useCallback((waveSurfer) => {\n        wavesurferRef.current = waveSurfer;\n        wavesurferRef.current.load(url);\n      \n        wavesurferRef.current.on(\"ready\", () => {\n          console.log(\"WaveSurfer is ready\");\n          setIsWavesurferReady(true);\n        });\n  \n      let lastTime = 0;\n      wavesurferRef.current.on(\"audioprocess\", (currentTime: number) => {\n        const diff = Math.abs(currentTime - lastTime);\n        if (diff > 0.1) {\n          lastTime = currentTime;\n          currTimeSubscriber.next(currentTime);\n        }\n      });\n    }, [url]);\n  \n    const setZoomClick = (zoom: number) => {\n      if (zoom < 5) zoom = 5;\n      if (zoom > 1000) zoom = 1000;\n      setZoom(zoom);\n    };\n  \n    useEffect(() => {\n      if (!wavesurferRef.current) return;\n  \n      setZoom(10);\n  \n      if (url === \"\") return;\n  \n      wavesurferRef.current.load(url);\n    }, [file, url]);\n  \n    useEffect(() => {\n        if (wavesurferRef.current) {\n        wavesurferRef.current.zoom(zoom);\n        wavesurferRef.current.fireEvent('zoom', zoom);\n        }\n    }, [zoom]);\n  \n    useEffect(() => {\n      if (!wavesurferRef.current) return;\n  \n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }, [isPlay]);\n  \n    useEffect(() => {\n      if (!wavesurferRef.current) return;\n  \n      setActiveSegment(activeSegmentProp);\n  \n      if (activeSegmentProp) {\n        let zoomFactor = 500;\n        const width = wavesurferRef.current.drawer.wrapper.clientWidth;\n        const segmentDuration = activeSegmentProp.End - activeSegmentProp.Start;\n  \n        for (let i = 0; i < 10; i++) {\n          if (segmentDuration * zoomFactor < width) break;\n          zoomFactor /= 2;\n        }\n        if (zoomFactor < 5) zoomFactor = 5;\n  \n        setZoomClick(zoomFactor);\n        setAutoCenter(false);\n        setIsPlay(true);\n  \n        const total = wavesurferRef.current.getDuration();\n        if (total > 0) {\n          const centerTime = activeSegmentProp.Start + (segmentDuration) / 2;\n          const t1 = centerTime / total;\n  \n          wavesurferRef.current.zoom(zoomFactor);\n          wavesurferRef.current.seekAndCenter(t1);\n          wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n          wavesurferRef.current.play();\n        }\n      }\n  \n      const subscription = currTimeSubscriber.subscribe(currentTime => {\n        if (wavesurferRef.current && activeSegmentProp && currentTime >= activeSegmentProp.End) {\n          wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n        }\n      });\n  \n      return () => {\n        subscription.unsubscribe();\n      };\n    }, [activeSegmentProp]);\n\n      // обработчик нажатия клавиш\n  const handleKeyDown = useCallback(\n    (event) => {\n      if (!wavesurferRef.current) {\n        return;\n      }\n\n      const { key, ctrlKey } = event;\n      let isNeedExKey = document.activeElement?.tagName === \"TEXTAREA\";\n      isNeedExKey = isNeedExKey || document.activeElement?.tagName === \"INPUT\";\n      let isEx = true;\n      if (isNeedExKey) {\n        isEx = ctrlKey;\n      }\n\n      if (key === \" \" && isEx) {\n        setIsPlay((prev) => !prev);\n      }\n\n    //   if ((key === \"w\" || key === \"s\") && isEx) {\n    //     event.preventDefault();\n    //     event.stopPropagation();\n    //   }\n\n      if ((key === \"a\" || key === \"d\" || key === \"ф\" || key === \"в\") && isEx) {\n        let diff = 5;\n        if (activeSegment !== null) diff = 1;\n        if (key === \"a\" || key === \"ф\") diff *= -1;\n\n        const total = wavesurferRef.current.getDuration();\n        let need = wavesurferRef.current.getCurrentTime() + diff;\n        if (need < 0) need = 0;\n        if (need > total) need = total;\n\n        wavesurferRef.current.setCurrentTime(need);\n        setIsPlay(true);\n\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    },\n    [activeSegment]\n  );\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [handleKeyDown]);\n  \n    return (\n      <div style={{ width: \"100%\", position: \"relative\" }}>\n        <WaveSurferDisplay\n          onMount={handleWSMount}\n          plugins={plugins}\n          zoom={zoom}\n          autoCenter={autoCenter}\n          isWavesurferReady={isWavesurferReady}\n          keywords={keywords}\n          channelCount={channelCount}\n          wavesurferRef={wavesurferRef}\n        />\n        \n        {/* <WaveSurferDisplay\n          onMount={handleWSMount}\n          plugins={plugins}\n          zoom={zoom}\n          autoCenter={autoCenter}\n          isWavesurferReady={isWavesurferReady}\n          keywords={keywords}\n          channelCount={channelCount}\n          wavesurferRef={wavesurferRef}\n        /> */}\n  \n        <div style={{ height: \"80px\" }}>\n                <IconButton\n                color=\"primary\"\n                size=\"medium\"\n                onClick={(e: any) => {\n                    (document.activeElement as HTMLElement).blur();\n                    setIsPlay((prev) => !prev);\n                }}\n                >\n                {isPlay ? <PauseCircleFilledIcon fontSize=\"large\" /> : <PlayCircleFilledIcon fontSize=\"large\" />}\n                </IconButton>\n                <IconButton\n                color=\"primary\"\n                size=\"medium\"\n                title=\"Увеличить масштаб\"\n                onClick={(e: any) => {\n                    (document.activeElement as HTMLElement).blur();\n                    setZoomClick(zoom * 2);\n                }}\n                >\n                <ZoomInIcon fontSize=\"large\" />\n                </IconButton>\n                <IconButton\n                color=\"primary\"\n                size=\"medium\"\n                title=\"Уменьшить масштаб\"\n                onClick={(e: any) => {\n                    (document.activeElement as HTMLElement).blur();\n                    setZoomClick(zoom / 2);\n                }}\n                >\n                <ZoomOutIcon fontSize=\"large\" />\n                </IconButton>\n            </div>\n      </div>\n    );\n  };\n\n  export default Test2Players;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}