{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { useEffect, useRef, useState } from \"react\";\nimport createWavesurfer from \"../utils/createWavesurfer\";\nimport createPlugin from \"../utils/createPlugin\";\nimport getDifference from \"../utils/getDifference\";\nexport default function useWavesurfer(_a) {\n  var {\n      container,\n      plugins = [],\n      onMount\n    } = _a,\n    props = __rest(_a, [\"container\", \"plugins\", \"onMount\"]);\n  const usedPluginsListCache = useRef([]);\n  const [wavesurfer, setWavesurfer] = useState(null);\n  useEffect(() => {\n    if (!container) return;\n    let _plugins = [];\n    // construct initial plugins list\n    if (plugins) {\n      _plugins = plugins.map(createPlugin);\n    }\n    usedPluginsListCache.current = _plugins;\n    const ws = createWavesurfer(Object.assign(Object.assign({\n      container\n    }, props), {\n      plugins: _plugins\n    }));\n    onMount === null || onMount === void 0 ? void 0 : onMount(ws);\n    setWavesurfer(ws);\n    return () => {\n      ws.destroy();\n    };\n  }, [container]);\n  // TODO: update waveform appearance\n  // useEffect(() => {}, [props]);\n  // TODO: think about whether its place is this hook?\n  useEffect(() => {\n    if (wavesurfer) {\n      const nextPluginsMap = plugins.map(createPlugin);\n      const {\n        disabled,\n        enabled\n      } = getDifference(usedPluginsListCache.current, nextPluginsMap);\n      usedPluginsListCache.current = nextPluginsMap;\n      disabled.forEach(plugin => {\n        if (!plugin.name) return;\n        wavesurfer === null || wavesurfer === void 0 ? void 0 : wavesurfer.destroyPlugin(plugin.name);\n      });\n      enabled.forEach(plugin => {\n        if (!plugin.name) return;\n        wavesurfer === null || wavesurfer === void 0 ? void 0 : wavesurfer.addPlugin(plugin).initPlugin(plugin.name);\n      });\n    }\n  }, [plugins]);\n  return wavesurfer;\n}","map":{"version":3,"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","useEffect","useRef","useState","createWavesurfer","createPlugin","getDifference","useWavesurfer","_a","container","plugins","onMount","props","usedPluginsListCache","wavesurfer","setWavesurfer","_plugins","map","current","ws","assign","destroy","nextPluginsMap","disabled","enabled","forEach","plugin","name","destroyPlugin","addPlugin","initPlugin"],"sources":["/home/gleb/my_app_test/node_modules/wavesurfer-react/dist/hooks/useWavesurfer.js"],"sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useEffect, useRef, useState } from \"react\";\nimport createWavesurfer from \"../utils/createWavesurfer\";\nimport createPlugin from \"../utils/createPlugin\";\nimport getDifference from \"../utils/getDifference\";\nexport default function useWavesurfer(_a) {\n    var { container, plugins = [], onMount } = _a, props = __rest(_a, [\"container\", \"plugins\", \"onMount\"]);\n    const usedPluginsListCache = useRef([]);\n    const [wavesurfer, setWavesurfer] = useState(null);\n    useEffect(() => {\n        if (!container)\n            return;\n        let _plugins = [];\n        // construct initial plugins list\n        if (plugins) {\n            _plugins = plugins.map(createPlugin);\n        }\n        usedPluginsListCache.current = _plugins;\n        const ws = createWavesurfer(Object.assign(Object.assign({ container }, props), { plugins: _plugins }));\n        onMount === null || onMount === void 0 ? void 0 : onMount(ws);\n        setWavesurfer(ws);\n        return () => {\n            ws.destroy();\n        };\n    }, [container]);\n    // TODO: update waveform appearance\n    // useEffect(() => {}, [props]);\n    // TODO: think about whether its place is this hook?\n    useEffect(() => {\n        if (wavesurfer) {\n            const nextPluginsMap = plugins.map(createPlugin);\n            const { disabled, enabled } = getDifference(usedPluginsListCache.current, nextPluginsMap);\n            usedPluginsListCache.current = nextPluginsMap;\n            disabled.forEach((plugin) => {\n                if (!plugin.name)\n                    return;\n                wavesurfer === null || wavesurfer === void 0 ? void 0 : wavesurfer.destroyPlugin(plugin.name);\n            });\n            enabled.forEach((plugin) => {\n                if (!plugin.name)\n                    return;\n                wavesurfer === null || wavesurfer === void 0 ? void 0 : wavesurfer.addPlugin(plugin).initPlugin(plugin.name);\n            });\n        }\n    }, [plugins]);\n    return wavesurfer;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}