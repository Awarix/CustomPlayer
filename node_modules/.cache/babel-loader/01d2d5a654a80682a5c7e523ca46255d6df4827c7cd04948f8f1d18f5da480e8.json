{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/Player.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { IconButton, Paper } from \"@mui/material\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport ExpandedPlayer from \"./ExpandedPlayer\";\nimport CompactPlayer from \"./CompactPlayer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SuperPlayer = ({\n  file,\n  activeSegmentProp,\n  url,\n  keywords,\n  channelCount\n}) => {\n  _s();\n  const [isPlay, setIsPlay] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [currentTime, setCurrentTime] = useState(0);\n  const handleKeyDown = useCallback(event => {\n    var _document$activeEleme, _document$activeEleme2;\n    const {\n      key,\n      ctrlKey\n    } = event;\n    let isNeedExKey = ((_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.tagName) === \"TEXTAREA\";\n    isNeedExKey = isNeedExKey || ((_document$activeEleme2 = document.activeElement) === null || _document$activeEleme2 === void 0 ? void 0 : _document$activeEleme2.tagName) === \"INPUT\";\n    let isEx = true;\n    if (isNeedExKey) {\n      isEx = ctrlKey;\n    }\n    if (key === \" \" && isEx) {\n      setIsPlay(prev => !prev);\n    }\n    if ((key === \"a\" || key === \"d\" || key === \"ф\" || key === \"в\") && isEx) {\n      let diff = 5;\n      if (activeSegmentProp !== null) diff = 1;\n      if (key === \"a\" || key === \"ф\") diff *= -1;\n      setCurrentTime(prev => {\n        let need = prev + diff;\n        if (need < 0) need = 0;\n        return need;\n      });\n      setIsPlay(true);\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }, [activeSegmentProp]);\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [handleKeyDown]);\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 3,\n    style: {\n      position: \"fixed\",\n      bottom: 0,\n      left: 0,\n      width: \"100%\",\n      zIndex: 1000,\n      padding: \"10px\",\n      boxSizing: \"border-box\",\n      transition: \"height 0.3s ease\",\n      height: isExpanded ? \"400px\" : \"80px\",\n      overflow: isExpanded ? \"auto\" : \"hidden\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      },\n      children: [isExpanded ? /*#__PURE__*/_jsxDEV(ExpandedPlayer, {\n        url: url,\n        isPlay: isPlay,\n        setIsPlay: setIsPlay,\n        currentTime: currentTime,\n        setCurrentTime: setCurrentTime,\n        activeSegmentProp: activeSegmentProp,\n        keywords: keywords,\n        channelCount: channelCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(CompactPlayer, {\n        url: url,\n        isPlay: isPlay,\n        setIsPlay: setIsPlay,\n        currentTime: currentTime,\n        setCurrentTime: setCurrentTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        size: \"medium\",\n        onClick: () => setIsExpanded(prev => !prev),\n        children: isExpanded ? /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 27\n        }, this) : /*#__PURE__*/_jsxDEV(ExpandLessIcon, {\n          fontSize: \"large\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 65\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 7\n  }, this);\n};\n_s(SuperPlayer, \"8luM+AlXThxhfP+bWfv4nJx6HKI=\");\n_c = SuperPlayer;\nexport default SuperPlayer;\nvar _c;\n$RefreshReg$(_c, \"SuperPlayer\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","IconButton","Paper","ExpandMoreIcon","ExpandLessIcon","ExpandedPlayer","CompactPlayer","jsxDEV","_jsxDEV","SuperPlayer","file","activeSegmentProp","url","keywords","channelCount","_s","isPlay","setIsPlay","isExpanded","setIsExpanded","currentTime","setCurrentTime","handleKeyDown","event","_document$activeEleme","_document$activeEleme2","key","ctrlKey","isNeedExKey","document","activeElement","tagName","isEx","prev","diff","need","preventDefault","stopPropagation","window","addEventListener","removeEventListener","elevation","style","position","bottom","left","width","zIndex","padding","boxSizing","transition","height","overflow","children","display","justifyContent","alignItems","fileName","_jsxFileName","lineNumber","columnNumber","color","size","onClick","fontSize","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/SuperAudioPlayer/Player.tsx"],"sourcesContent":["import React, { FC, useState, useCallback, useEffect } from \"react\";\nimport { IconButton, Paper } from \"@mui/material\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport ExpandedPlayer from \"./ExpandedPlayer\";\nimport CompactPlayer from \"./CompactPlayer\";\nimport { KeywordColor, SegmentModel as Segment } from \"../../AudioContext\";\n\ninterface Props {\n    file: File | null;\n    activeSegmentProp: Segment | null;\n    url: string;\n    keywords: KeywordColor[];\n    channelCount: number;\n  }\n\nconst SuperPlayer: FC<Props> = ({ file, activeSegmentProp, url, keywords, channelCount }) => {\n    const [isPlay, setIsPlay] = useState<boolean>(false);\n    const [isExpanded, setIsExpanded] = useState<boolean>(false);\n    const [currentTime, setCurrentTime] = useState<number>(0);\n  \n    const handleKeyDown = useCallback(\n      (event) => {\n        const { key, ctrlKey } = event;\n        let isNeedExKey = document.activeElement?.tagName === \"TEXTAREA\";\n        isNeedExKey = isNeedExKey || document.activeElement?.tagName === \"INPUT\";\n        let isEx = true;\n        if (isNeedExKey) {\n          isEx = ctrlKey;\n        }\n  \n        if (key === \" \" && isEx) {\n          setIsPlay((prev) => !prev);\n        }\n  \n        if ((key === \"a\" || key === \"d\" || key === \"ф\" || key === \"в\") && isEx) {\n          let diff = 5;\n          if (activeSegmentProp !== null) diff = 1;\n          if (key === \"a\" || key === \"ф\") diff *= -1;\n  \n          setCurrentTime((prev) => {\n            let need = prev + diff;\n            if (need < 0) need = 0;\n            return need;\n          });\n          setIsPlay(true);\n  \n          event.preventDefault();\n          event.stopPropagation();\n        }\n      },\n      [activeSegmentProp]\n    );\n  \n    useEffect(() => {\n      window.addEventListener(\"keydown\", handleKeyDown);\n      return () => {\n        window.removeEventListener(\"keydown\", handleKeyDown);\n      };\n    }, [handleKeyDown]);\n  \n    return (\n      <Paper\n        elevation={3}\n        style={{\n          position: \"fixed\",\n          bottom: 0,\n          left: 0,\n          width: \"100%\",\n          zIndex: 1000,\n          padding: \"10px\",\n          boxSizing: \"border-box\",\n          transition: \"height 0.3s ease\",\n          height: isExpanded ? \"400px\" : \"80px\",\n          overflow: isExpanded ? \"auto\" : \"hidden\",\n        }}\n      >\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n          {isExpanded ? (\n            <ExpandedPlayer\n              url={url}\n              isPlay={isPlay}\n              setIsPlay={setIsPlay}\n              currentTime={currentTime}\n              setCurrentTime={setCurrentTime}\n              activeSegmentProp={activeSegmentProp}\n              keywords={keywords}\n              channelCount={channelCount}\n            />\n          ) : (\n            <CompactPlayer\n              url={url}\n              isPlay={isPlay}\n              setIsPlay={setIsPlay}\n              currentTime={currentTime}\n              setCurrentTime={setCurrentTime}\n            />\n          )}\n          <IconButton\n            color=\"primary\"\n            size=\"medium\"\n            onClick={() => setIsExpanded((prev) => !prev)}\n          >\n            {isExpanded ? <ExpandMoreIcon fontSize=\"large\" /> : <ExpandLessIcon fontSize=\"large\" />}\n          </IconButton>\n        </div>\n      </Paper>\n    );\n  };\n  \nexport default SuperPlayer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}