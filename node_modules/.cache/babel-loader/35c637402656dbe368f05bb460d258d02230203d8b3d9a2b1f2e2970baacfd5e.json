{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/WaveWithKeywords.tsx\",\n  _s = $RefreshSig$();\nimport { useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport { WaveSurfer, WaveForm, Region } from \"wavesurfer-react\";\nimport { currTimeSubscriber, changeSegmentPositionSubscriber } from \"../../subscribers/PlayerSubscriber\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RegionsPlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.regions.min\");\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\nconst WaveWithKeywords = ({\n  file,\n  segments,\n  activeSegmentProp,\n  url,\n  keywords\n}) => {\n  _s();\n  const [isPlay, setIsPlay] = useState(false);\n  const [autoCenter, setAutoCenter] = useState(true);\n  const [zoom, setZoom] = useState(10);\n  const [regions, setRegions] = useState([]);\n  const [activeSegment, setActiveSegment] = useState(activeSegmentProp);\n  const plugins = useMemo(() => [{\n    plugin: RegionsPlugin,\n    options: {\n      dragSelection: false,\n      showTooltip: false\n    }\n  }, {\n    plugin: TimelinePlugin,\n    options: {\n      container: \"#timeline\"\n    }\n  }], []);\n  const wavesurferRef = useRef(null);\n  const handleWSMount = useCallback(waveSurfer => {\n    wavesurferRef.current = waveSurfer;\n    wavesurferRef.current.load(url);\n    wavesurferRef.current.on(\"ready\", () => {\n      console.log(\"WaveSurfer is ready\");\n      addMarkers(); // Добавляем маркеры после загрузки аудиофайла\n    });\n    wavesurferRef.current.on(\"region-update-end\", region => {\n      changeSegmentPositionSubscriber.next({\n        segment: region.data,\n        start: region.start,\n        end: region.end\n      });\n    });\n    let lastTime = 0;\n    wavesurferRef.current.on(\"audioprocess\", currentTime => {\n      const diff = Math.abs(currentTime - lastTime);\n      if (diff > 0.1) {\n        lastTime = currentTime;\n        currTimeSubscriber.next(currentTime);\n      }\n    });\n  }, [url]);\n  const addMarkers = useCallback(() => {\n    if (!wavesurferRef.current) return;\n    const markersContainer = document.createElement('div');\n    markersContainer.style.position = 'absolute';\n    markersContainer.style.top = '0';\n    markersContainer.style.left = '0';\n    markersContainer.style.width = '100%';\n    markersContainer.style.height = '100%';\n    markersContainer.style.pointerEvents = 'none'; // Чтобы маркеры не блокировали взаимодействие с волной\n\n    const waveformContainer = document.getElementById('waveform');\n    if (waveformContainer) {\n      waveformContainer.appendChild(markersContainer);\n    }\n    keywords.forEach(({\n      keyword,\n      color\n    }) => {\n      const marker = document.createElement('div');\n      const label = document.createElement('span');\n\n      // Устанавливаем стиль для маркера\n      marker.style.position = 'absolute';\n      marker.style.left = `${keyword.Start / wavesurferRef.current.getDuration() * 100}%`;\n      marker.style.bottom = '0';\n      marker.style.width = '2px';\n      marker.style.height = '100%';\n      marker.style.backgroundColor = color;\n\n      // Устанавливаем стиль для лейбла\n      label.textContent = keyword.Name;\n      label.style.position = 'absolute';\n      label.style.left = '50%';\n      label.style.transform = 'translateX(-50%)';\n      label.style.bottom = '100%';\n      label.style.backgroundColor = color;\n      label.style.color = '#fff';\n      label.style.padding = '2px 5px';\n      label.style.fontSize = '12px';\n      label.style.borderRadius = '3px';\n\n      // Добавляем лейбл к маркеру\n      marker.appendChild(label);\n      markersContainer.appendChild(marker);\n    });\n\n    // Добавляем контейнер с маркерами на waveform\n    if (waveformContainer) {\n      waveformContainer.appendChild(markersContainer);\n    }\n  }, [keywords]);\n  const setZoomClick = zoom => {\n    if (zoom < 5) zoom = 5;\n    if (zoom > 1000) zoom = 1000;\n    setZoom(zoom);\n  };\n  useEffect(() => {\n    const mappedRegions = segments.map(s => ({\n      id: s.id,\n      start: s.Start,\n      end: s.End,\n      color: \"rgba(212, 215, 247, 0.4)\",\n      drag: false,\n      resize: false,\n      channelIdx: s.ChannelNumber,\n      // Привязываем регион к соответствующему каналу\n      handleStyle: {\n        left: {\n          backgroundColor: \"transparent\",\n          width: \"5px\"\n        },\n        right: {\n          backgroundColor: \"transparent\",\n          width: \"5px\"\n        }\n      },\n      data: s\n    }));\n    setRegions(mappedRegions);\n  }, [segments]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    setZoom(10);\n    if (url === \"\") return;\n    wavesurferRef.current.load(url);\n  }, [file, url]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    if (wavesurferRef.current.params.minPxPerSec !== zoom) {\n      wavesurferRef.current.zoom(zoom);\n    }\n  }, [zoom]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    if (isPlay) {\n      wavesurferRef.current.play();\n    } else {\n      wavesurferRef.current.pause();\n    }\n  }, [isPlay]);\n  useEffect(() => {\n    if (!wavesurferRef.current) return;\n    setActiveSegment(activeSegmentProp);\n    if (activeSegmentProp) {\n      let zoomFactor = 500;\n      const width = wavesurferRef.current.drawer.wrapper.clientWidth;\n      const segmentDuration = activeSegmentProp.End - activeSegmentProp.Start;\n      for (let i = 0; i < 10; i++) {\n        if (segmentDuration * zoomFactor < width) break;\n        zoomFactor /= 2;\n      }\n      if (zoomFactor < 5) zoomFactor = 5;\n      setZoomClick(zoomFactor);\n      setAutoCenter(false);\n      setIsPlay(true);\n      const total = wavesurferRef.current.getDuration();\n      if (total > 0) {\n        const centerTime = activeSegmentProp.Start + segmentDuration / 2;\n        const t1 = centerTime / total;\n        wavesurferRef.current.zoom(zoomFactor);\n        wavesurferRef.current.seekAndCenter(t1);\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n        wavesurferRef.current.play();\n      }\n    }\n    regions.forEach(region => {\n      if (region.color !== \"rgba(212, 215, 247, 0.4)\") {\n        region.color = \"rgba(212, 215, 247, 0.4)\";\n      }\n      if ((activeSegmentProp === null || activeSegmentProp === void 0 ? void 0 : activeSegmentProp.id) === region.id) {\n        region.color = \"rgba(212, 215, 247, 0.4)\";\n      }\n    });\n    const subscription = currTimeSubscriber.subscribe(currentTime => {\n      if (wavesurferRef.current && activeSegmentProp && currentTime >= activeSegmentProp.End) {\n        wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n      }\n    });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [activeSegmentProp, regions]);\n  useEffect(() => {\n    if (wavesurferRef.current) {\n      // Обновляем маркеры, когда ключевые слова изменяются\n      addMarkers();\n    }\n  }, [keywords, addMarkers]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(WaveSurfer, {\n      onMount: handleWSMount,\n      plugins: plugins,\n      children: [/*#__PURE__*/_jsxDEV(WaveForm, {\n        id: \"waveform\",\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        autoCenter: autoCenter,\n        splitChannels: true\n        //   style={{ position: 'relative' }} // Добавляем стиль для корректного отображения маркеров\n        ,\n        children: regions.map(regionProps => /*#__PURE__*/_jsxDEV(Region, {\n          ...regionProps\n        }, regionProps.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: \"20px\"\n        },\n        id: \"timeline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        height: \"40px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        onClick: e => {\n          document.activeElement.blur();\n          setIsPlay(prev => !prev);\n        },\n        children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n          fontSize: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n          fontSize: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 67\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        title: \"\\u0423\\u0432\\u0435\\u043B\\u0438\\u0447\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n        onClick: e => {\n          document.activeElement.blur();\n          setZoomClick(zoom * 2);\n        },\n        children: /*#__PURE__*/_jsxDEV(ZoomInIcon, {\n          fontSize: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        title: \"\\u0423\\u043C\\u0435\\u043D\\u044C\\u0448\\u0438\\u0442\\u044C \\u043C\\u0430\\u0441\\u0448\\u0442\\u0430\\u0431\",\n        onClick: e => {\n          document.activeElement.blur();\n          setZoomClick(zoom / 2);\n        },\n        children: /*#__PURE__*/_jsxDEV(ZoomOutIcon, {\n          fontSize: \"medium\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n};\n_s(WaveWithKeywords, \"fYwcFw3gioCNlgl0Bog2ZtPTQxo=\");\n_c = WaveWithKeywords;\nexport default WaveWithKeywords;\nvar _c;\n$RefreshReg$(_c, \"WaveWithKeywords\");","map":{"version":3,"names":["useMemo","useRef","useState","useEffect","useCallback","IconButton","PlayCircleFilledIcon","PauseCircleFilledIcon","ZoomInIcon","ZoomOutIcon","WaveSurfer","WaveForm","Region","currTimeSubscriber","changeSegmentPositionSubscriber","jsxDEV","_jsxDEV","RegionsPlugin","require","TimelinePlugin","WaveWithKeywords","file","segments","activeSegmentProp","url","keywords","_s","isPlay","setIsPlay","autoCenter","setAutoCenter","zoom","setZoom","regions","setRegions","activeSegment","setActiveSegment","plugins","plugin","options","dragSelection","showTooltip","container","wavesurferRef","handleWSMount","waveSurfer","current","load","on","console","log","addMarkers","region","next","segment","data","start","end","lastTime","currentTime","diff","Math","abs","markersContainer","document","createElement","style","position","top","left","width","height","pointerEvents","waveformContainer","getElementById","appendChild","forEach","keyword","color","marker","label","Start","getDuration","bottom","backgroundColor","textContent","Name","transform","padding","fontSize","borderRadius","setZoomClick","mappedRegions","map","s","id","End","drag","resize","channelIdx","ChannelNumber","handleStyle","right","params","minPxPerSec","play","pause","zoomFactor","drawer","wrapper","clientWidth","segmentDuration","i","total","centerTime","t1","seekAndCenter","setCurrentTime","subscription","subscribe","unsubscribe","children","onMount","waveColor","progressColor","cursorColor","splitChannels","regionProps","fileName","_jsxFileName","lineNumber","columnNumber","onClick","e","activeElement","blur","prev","title","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/WaveWithKeywords.tsx"],"sourcesContent":["import { FC, useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport { WaveSurfer, WaveForm, Region } from \"wavesurfer-react\";\nimport { currTimeSubscriber, changeSegmentPositionSubscriber } from \"../../subscribers/PlayerSubscriber\";\nimport { SegmentModel as Segment, KeywordColor } from \"../AudioContext\";\n\ninterface Props {\n  file: File | null;\n  segments: Segment[];\n  keywords: KeywordColor[];\n  activeSegmentProp: Segment | null;\n  url: string;\n}\n\nconst RegionsPlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.regions.min\");\nconst TimelinePlugin = require(\"wavesurfer.js/dist/plugin/wavesurfer.timeline.min\");\n\nconst WaveWithKeywords: FC<Props> = ({ file, segments, activeSegmentProp, url, keywords }) => {\n  const [isPlay, setIsPlay] = useState<boolean>(false);\n  const [autoCenter, setAutoCenter] = useState<boolean>(true);\n  const [zoom, setZoom] = useState<number>(10);\n  const [regions, setRegions] = useState<any[]>([]);\n  const [activeSegment, setActiveSegment] = useState<Segment | null>(activeSegmentProp);\n\n  const plugins = useMemo(() => [\n    {\n      plugin: RegionsPlugin,\n      options: { dragSelection: false, showTooltip: false },\n    },\n    {\n      plugin: TimelinePlugin,\n      options: { container: \"#timeline\" },\n    },\n  ], []);\n\n  const wavesurferRef = useRef<any>(null);\n\n  const handleWSMount = useCallback((waveSurfer) => {\n    wavesurferRef.current = waveSurfer;\n    wavesurferRef.current.load(url);\n\n    wavesurferRef.current.on(\"ready\", () => {\n      console.log(\"WaveSurfer is ready\");\n      addMarkers(); // Добавляем маркеры после загрузки аудиофайла\n    });\n\n    wavesurferRef.current.on(\"region-update-end\", (region: any) => {\n      changeSegmentPositionSubscriber.next({\n        segment: region.data,\n        start: region.start,\n        end: region.end,\n      });\n    });\n\n    let lastTime = 0;\n    wavesurferRef.current.on(\"audioprocess\", (currentTime: number) => {\n      const diff = Math.abs(currentTime - lastTime);\n      if (diff > 0.1) {\n        lastTime = currentTime;\n        currTimeSubscriber.next(currentTime);\n      }\n    });\n  }, [url]);\n\n  const addMarkers = useCallback(() => {\n    if (!wavesurferRef.current) return;\n\n    const markersContainer = document.createElement('div');\n    markersContainer.style.position = 'absolute';\n    markersContainer.style.top = '0';\n    markersContainer.style.left = '0';\n    markersContainer.style.width = '100%';\n    markersContainer.style.height = '100%';\n    markersContainer.style.pointerEvents = 'none'; // Чтобы маркеры не блокировали взаимодействие с волной\n\n    const waveformContainer = document.getElementById('waveform');\n    if (waveformContainer) {\n      waveformContainer.appendChild(markersContainer);\n    }\n\n    keywords.forEach(({ keyword, color }) => {\n      const marker = document.createElement('div');\n      const label = document.createElement('span');\n\n     // Устанавливаем стиль для маркера\n     marker.style.position = 'absolute';\n     marker.style.left = `${(keyword.Start / wavesurferRef.current.getDuration()) * 100}%`;\n     marker.style.bottom = '0';\n     marker.style.width = '2px';\n     marker.style.height = '100%';\n     marker.style.backgroundColor = color;\n\n     // Устанавливаем стиль для лейбла\n     label.textContent = keyword.Name;\n     label.style.position = 'absolute';\n     label.style.left = '50%';\n     label.style.transform = 'translateX(-50%)';\n     label.style.bottom = '100%';\n     label.style.backgroundColor = color;\n     label.style.color = '#fff';\n     label.style.padding = '2px 5px';\n     label.style.fontSize = '12px';\n     label.style.borderRadius = '3px';\n\n     // Добавляем лейбл к маркеру\n     marker.appendChild(label);\n     markersContainer.appendChild(marker);\n   });\n\n   // Добавляем контейнер с маркерами на waveform\n   if (waveformContainer) {\n     waveformContainer.appendChild(markersContainer);\n   }\n }, [keywords]);\n\n const setZoomClick = (zoom: number) => {\n   if (zoom < 5) zoom = 5;\n   if (zoom > 1000) zoom = 1000;\n   setZoom(zoom);\n };\n\n useEffect(() => {\n   const mappedRegions = segments.map(s => ({\n     id: s.id,\n     start: s.Start,\n     end: s.End,\n     color: \"rgba(212, 215, 247, 0.4)\",\n     drag: false,\n     resize: false,\n     channelIdx: s.ChannelNumber, // Привязываем регион к соответствующему каналу\n     handleStyle: {\n       left: { backgroundColor: \"transparent\", width: \"5px\" },\n       right: { backgroundColor: \"transparent\", width: \"5px\" },\n     },\n     data: s,\n   }));\n   setRegions(mappedRegions);\n }, [segments]);\n\n useEffect(() => {\n   if (!wavesurferRef.current) return;\n\n   setZoom(10);\n\n   if (url === \"\") return;\n\n   wavesurferRef.current.load(url);\n }, [file, url]);\n\n useEffect(() => {\n   if (!wavesurferRef.current) return;\n\n   if (wavesurferRef.current.params.minPxPerSec !== zoom) {\n     wavesurferRef.current.zoom(zoom);\n   }\n }, [zoom]);\n\n useEffect(() => {\n   if (!wavesurferRef.current) return;\n\n   if (isPlay) {\n     wavesurferRef.current.play();\n   } else {\n     wavesurferRef.current.pause();\n   }\n }, [isPlay]);\n\n useEffect(() => {\n   if (!wavesurferRef.current) return;\n\n   setActiveSegment(activeSegmentProp);\n\n   if (activeSegmentProp) {\n     let zoomFactor = 500;\n     const width = wavesurferRef.current.drawer.wrapper.clientWidth;\n     const segmentDuration = activeSegmentProp.End - activeSegmentProp.Start;\n\n     for (let i = 0; i < 10; i++) {\n       if (segmentDuration * zoomFactor < width) break;\n       zoomFactor /= 2;\n     }\n     if (zoomFactor < 5) zoomFactor = 5;\n\n     setZoomClick(zoomFactor);\n     setAutoCenter(false);\n     setIsPlay(true);\n\n     const total = wavesurferRef.current.getDuration();\n     if (total > 0) {\n       const centerTime = activeSegmentProp.Start + (segmentDuration) / 2;\n       const t1 = centerTime / total;\n\n       wavesurferRef.current.zoom(zoomFactor);\n       wavesurferRef.current.seekAndCenter(t1);\n       wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n       wavesurferRef.current.play();\n     }\n   }\n\n   regions.forEach(region => {\n     if (region.color !== \"rgba(212, 215, 247, 0.4)\") {\n       region.color = \"rgba(212, 215, 247, 0.4)\";\n     }\n\n     if (activeSegmentProp?.id === region.id) {\n       region.color = \"rgba(212, 215, 247, 0.4)\";\n     }\n   });\n\n   const subscription = currTimeSubscriber.subscribe(currentTime => {\n     if (wavesurferRef.current && activeSegmentProp && currentTime >= activeSegmentProp.End) {\n       wavesurferRef.current.setCurrentTime(activeSegmentProp.Start);\n     }\n   });\n\n   return () => {\n     subscription.unsubscribe();\n   };\n }, [activeSegmentProp, regions]);\n\n useEffect(() => {\n    if (wavesurferRef.current) {\n      // Обновляем маркеры, когда ключевые слова изменяются\n      addMarkers();\n    }\n  }, [keywords, addMarkers]);\n\n  return (\n    <div style={{ width: \"100%\" }}>\n      <WaveSurfer onMount={handleWSMount} plugins={plugins}>\n        <WaveForm\n          id=\"waveform\"\n          waveColor=\"#b7e1dd\"\n          progressColor=\"#4Db6AC\"\n          cursorColor=\"#357F78\"\n          autoCenter={autoCenter}\n          splitChannels={true}\n        //   style={{ position: 'relative' }} // Добавляем стиль для корректного отображения маркеров\n        >\n          {regions.map(regionProps => (\n            <Region\n              key={regionProps.id}\n              {...regionProps}\n            />\n          ))}\n        </WaveForm>\n        <div style={{ height: \"20px\" }} id=\"timeline\" />\n      </WaveSurfer>\n\n      <div style={{ height: \"40px\" }}>\n        <IconButton\n          color=\"primary\"\n          onClick={(e: any) => {\n            (document.activeElement as HTMLElement).blur();\n            setIsPlay((prev) => !prev);\n          }}\n        >\n          {isPlay ? <PauseCircleFilledIcon fontSize=\"medium\" /> : <PlayCircleFilledIcon fontSize=\"medium\" />}\n        </IconButton>\n        <IconButton\n          color=\"primary\"\n          title=\"Увеличить масштаб\"\n          onClick={(e: any) => {\n            (document.activeElement as HTMLElement).blur();\n            setZoomClick(zoom * 2);\n          }}\n        >\n          <ZoomInIcon fontSize=\"medium\" />\n        </IconButton>\n        <IconButton\n          color=\"primary\"\n          title=\"Уменьшить масштаб\"\n          onClick={(e: any) => {\n            (document.activeElement as HTMLElement).blur();\n            setZoomClick(zoom / 2);\n          }}\n        >\n          <ZoomOutIcon fontSize=\"medium\" />\n        </IconButton>\n      </div>\n    </div>\n  );\n};\n\nexport default WaveWithKeywords;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}