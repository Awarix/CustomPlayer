{"ast":null,"code":"var _jsxFileName = \"/home/gleb/my_app_test/src/audio/wavesurfer/SuperZhestkyiPlayer/Compact.tsx\",\n  _s = $RefreshSig$();\nimport { useRef, useState, useEffect } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport WaveSurferClass from \"wavesurfer.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CompactPlayer = ({\n  url,\n  isPlay,\n  setIsPlay,\n  currentTime,\n  setCurrentTime\n}) => {\n  _s();\n  const containerRef = useRef(null);\n  const wavesurferRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n  useEffect(() => {\n    if (containerRef.current && !wavesurferRef.current) {\n      wavesurferRef.current = WaveSurferClass.create({\n        container: containerRef.current,\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        responsive: true,\n        height: 40,\n        barWidth: 2,\n        barGap: 1\n      });\n      wavesurferRef.current.on('ready', () => {\n        var _wavesurferRef$curren;\n        setIsReady(true);\n        (_wavesurferRef$curren = wavesurferRef.current) === null || _wavesurferRef$curren === void 0 ? void 0 : _wavesurferRef$curren.setCurrentTime(currentTime);\n      });\n      wavesurferRef.current.on('error', error => {\n        console.error('WaveSurfer error:', error);\n      });\n      wavesurferRef.current.on('audioprocess', () => {\n        if (wavesurferRef.current && isReady) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n      wavesurferRef.current.load(url);\n    }\n    return () => {\n      if (wavesurferRef.current) {\n        wavesurferRef.current.destroy();\n      }\n    };\n  }, [url, currentTime, setCurrentTime]);\n  useEffect(() => {\n    if (wavesurferRef.current && isReady) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay, isReady]);\n  const handlePlayPause = () => {\n    if (isReady) {\n      setIsPlay(!isPlay);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      alignItems: \"center\",\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n      color: \"primary\",\n      size: \"medium\",\n      onClick: handlePlayPause,\n      disabled: !isReady,\n      children: isPlay ? /*#__PURE__*/_jsxDEV(PauseCircleFilledIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }, this) : /*#__PURE__*/_jsxDEV(PlayCircleFilledIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 64\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        flex: 1,\n        marginLeft: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(CompactPlayer, \"lrjWsmnCKXdt8OLBYFo6pOiM23E=\");\n_c = CompactPlayer;\nexport default CompactPlayer;\nvar _c;\n$RefreshReg$(_c, \"CompactPlayer\");","map":{"version":3,"names":["useRef","useState","useEffect","IconButton","PlayCircleFilledIcon","PauseCircleFilledIcon","WaveSurferClass","jsxDEV","_jsxDEV","CompactPlayer","url","isPlay","setIsPlay","currentTime","setCurrentTime","_s","containerRef","wavesurferRef","isReady","setIsReady","current","create","container","waveColor","progressColor","cursorColor","responsive","height","barWidth","barGap","on","_wavesurferRef$curren","error","console","getCurrentTime","load","destroy","play","pause","handlePlayPause","style","display","alignItems","width","children","color","size","onClick","disabled","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","ref","flex","marginLeft","_c","$RefreshReg$"],"sources":["/home/gleb/my_app_test/src/audio/wavesurfer/SuperZhestkyiPlayer/Compact.tsx"],"sourcesContent":["import { FC, useMemo, useRef, useState, useEffect, useCallback } from \"react\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { WaveSurfer, WaveForm } from \"wavesurfer-react\";\nimport { currTimeSubscriber } from \"../../../subscribers/PlayerSubscriber\";\nimport { SegmentModel as Segment } from \"../../AudioContext\";\nimport WaveSurferClass from \"wavesurfer.js\";\n\nconst CompactPlayer: FC<{ url: string; isPlay: boolean; setIsPlay: (play: boolean) => void; currentTime: number; setCurrentTime: (time: number) => void;\n    }> = ({ url, isPlay, setIsPlay, currentTime, setCurrentTime }) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n  const wavesurferRef = useRef<WaveSurferClass | null>(null);\n  const [isReady, setIsReady] = useState(false);\n\n  useEffect(() => {\n    if (containerRef.current && !wavesurferRef.current) {\n      wavesurferRef.current = WaveSurferClass.create({\n        container: containerRef.current,\n        waveColor: \"#b7e1dd\",\n        progressColor: \"#4Db6AC\",\n        cursorColor: \"#357F78\",\n        responsive: true,\n        height: 40,\n        barWidth: 2,\n        barGap: 1,\n      });\n\n      wavesurferRef.current.on('ready', () => {\n        setIsReady(true);\n        wavesurferRef.current?.setCurrentTime(currentTime);\n      });\n\n      wavesurferRef.current.on('error', (error: any) => {\n        console.error('WaveSurfer error:', error);\n      });\n\n      wavesurferRef.current.on('audioprocess', () => {\n        if (wavesurferRef.current && isReady) {\n          setCurrentTime(wavesurferRef.current.getCurrentTime());\n        }\n      });\n\n      wavesurferRef.current.load(url);\n    }\n\n    return () => {\n      if (wavesurferRef.current) {\n        wavesurferRef.current.destroy();\n      }\n    };\n  }, [url, currentTime, setCurrentTime]);\n\n  useEffect(() => {\n    if (wavesurferRef.current && isReady) {\n      if (isPlay) {\n        wavesurferRef.current.play();\n      } else {\n        wavesurferRef.current.pause();\n      }\n    }\n  }, [isPlay, isReady]);\n\n  const handlePlayPause = () => {\n    if (isReady) {\n      setIsPlay(!isPlay);\n    }\n  };\n\n  return (\n    <div style={{ display: \"flex\", alignItems: \"center\", width: \"100%\" }}>\n      <IconButton\n        color=\"primary\"\n        size=\"medium\"\n        onClick={handlePlayPause}\n        disabled={!isReady}\n      >\n        {isPlay ? <PauseCircleFilledIcon fontSize=\"large\" /> : <PlayCircleFilledIcon fontSize=\"large\" />}\n      </IconButton>\n      <div ref={containerRef} style={{ flex: 1, marginLeft: 10 }} />\n    </div>\n  );\n};\n\nexport default CompactPlayer"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}