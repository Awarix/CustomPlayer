{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { useEffect, useRef, useState } from \"react\";\nimport useRegionEvent from \"../hooks/useRegionEvent\";\nimport useWavesurferContext from \"../hooks/useWavesurferContext\";\nexport const Region = _a => {\n  var {\n      onOver,\n      onLeave,\n      onClick,\n      onDoubleClick,\n      onIn,\n      onOut,\n      onRemove,\n      onUpdate,\n      onUpdateEnd\n    } = _a,\n    props = __rest(_a, [\"onOver\", \"onLeave\", \"onClick\", \"onDoubleClick\", \"onIn\", \"onOut\", \"onRemove\", \"onUpdate\", \"onUpdateEnd\"]);\n  const waveSurfer = useWavesurferContext();\n  const isRenderedCache = useRef(false);\n  const [regionRef, setRegionRef] = useState(null);\n  useEffect(() => {\n    return () => {\n      if (regionRef) {\n        regionRef.remove();\n      }\n    };\n  }, [regionRef]);\n  // TODO: may need some improvements\n  useEffect(() => {\n    if (regionRef) {\n      const update = UpdatableRegionProps.reduce((result, prop) => {\n        if (regionRef[prop] !== props[prop]) {\n          return Object.assign(Object.assign({}, result), {\n            [prop]: props[prop]\n          });\n        }\n        return result;\n      }, {\n        id: props.id\n      });\n      regionRef.update(update);\n    }\n  }, UpdatableRegionProps.map(prop => props[prop]));\n  useEffect(() => {\n    if (!isRenderedCache.current && waveSurfer) {\n      isRenderedCache.current = true;\n      let region;\n      region = waveSurfer.regions.list[props.id];\n      if (!region) {\n        region = waveSurfer.addRegion(props);\n      }\n      setRegionRef(region);\n    }\n    // eslint-disable-next-line\n  }, [waveSurfer]);\n  useRegionEvent(regionRef, \"click\", onClick);\n  useRegionEvent(regionRef, \"mouseenter\", onOver);\n  useRegionEvent(regionRef, \"mouseleave\", onLeave);\n  useRegionEvent(regionRef, \"dblclick\", onDoubleClick);\n  useRegionEvent(regionRef, \"in\", onIn);\n  useRegionEvent(regionRef, \"out\", onOut);\n  useRegionEvent(regionRef, \"remove\", onRemove);\n  useRegionEvent(regionRef, \"update\", onUpdate);\n  useRegionEvent(regionRef, \"update-end\", onUpdateEnd);\n  return null;\n};\nexport default Region;\nconst UpdatableRegionProps = [\"start\", \"end\", \"loop\", \"color\", \"handleStyle\", \"resize\", \"drag\", \"drag\", \"end\", \"handleStyle\", \"id\", \"loop\", \"preventContextMenu\", \"resize\", \"start\"];","map":{"version":3,"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","useEffect","useRef","useState","useRegionEvent","useWavesurferContext","Region","_a","onOver","onLeave","onClick","onDoubleClick","onIn","onOut","onRemove","onUpdate","onUpdateEnd","props","waveSurfer","isRenderedCache","regionRef","setRegionRef","remove","update","UpdatableRegionProps","reduce","result","prop","assign","id","map","current","region","regions","list","addRegion"],"sources":["/home/gleb/my_app_test/node_modules/wavesurfer-react/dist/components/Region.js"],"sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useEffect, useRef, useState } from \"react\";\nimport useRegionEvent from \"../hooks/useRegionEvent\";\nimport useWavesurferContext from \"../hooks/useWavesurferContext\";\nexport const Region = (_a) => {\n    var { onOver, onLeave, onClick, onDoubleClick, onIn, onOut, onRemove, onUpdate, onUpdateEnd } = _a, props = __rest(_a, [\"onOver\", \"onLeave\", \"onClick\", \"onDoubleClick\", \"onIn\", \"onOut\", \"onRemove\", \"onUpdate\", \"onUpdateEnd\"]);\n    const waveSurfer = useWavesurferContext();\n    const isRenderedCache = useRef(false);\n    const [regionRef, setRegionRef] = useState(null);\n    useEffect(() => {\n        return () => {\n            if (regionRef) {\n                regionRef.remove();\n            }\n        };\n    }, [regionRef]);\n    // TODO: may need some improvements\n    useEffect(() => {\n        if (regionRef) {\n            const update = UpdatableRegionProps.reduce((result, prop) => {\n                if (regionRef[prop] !== props[prop]) {\n                    return Object.assign(Object.assign({}, result), { [prop]: props[prop] });\n                }\n                return result;\n            }, { id: props.id });\n            regionRef.update(update);\n        }\n    }, UpdatableRegionProps.map((prop) => props[prop]));\n    useEffect(() => {\n        if (!isRenderedCache.current && waveSurfer) {\n            isRenderedCache.current = true;\n            let region;\n            region = waveSurfer.regions.list[props.id];\n            if (!region) {\n                region = waveSurfer.addRegion(props);\n            }\n            setRegionRef(region);\n        }\n        // eslint-disable-next-line\n    }, [waveSurfer]);\n    useRegionEvent(regionRef, \"click\", onClick);\n    useRegionEvent(regionRef, \"mouseenter\", onOver);\n    useRegionEvent(regionRef, \"mouseleave\", onLeave);\n    useRegionEvent(regionRef, \"dblclick\", onDoubleClick);\n    useRegionEvent(regionRef, \"in\", onIn);\n    useRegionEvent(regionRef, \"out\", onOut);\n    useRegionEvent(regionRef, \"remove\", onRemove);\n    useRegionEvent(regionRef, \"update\", onUpdate);\n    useRegionEvent(regionRef, \"update-end\", onUpdateEnd);\n    return null;\n};\nexport default Region;\nconst UpdatableRegionProps = [\n    \"start\",\n    \"end\",\n    \"loop\",\n    \"color\",\n    \"handleStyle\",\n    \"resize\",\n    \"drag\",\n    \"drag\",\n    \"end\",\n    \"handleStyle\",\n    \"id\",\n    \"loop\",\n    \"preventContextMenu\",\n    \"resize\",\n    \"start\",\n];\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}